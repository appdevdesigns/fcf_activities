steal.has("stealconfig.js","opstools/FCFActivities/views/Portal/Portal.ejs","opstools/FCFActivities/controllers/Portal.js","opstools/FCFActivities/models/base/UserTeam.js","opstools/FCFActivities/models/UserTeam.js","opstools/FCFActivities/models/base/TeamActivity.js","opstools/FCFActivities/models/TeamActivity.js","opstools/FCFActivities/controllers/AddChooseMinistry.js","opstools/FCFActivities/models/base/TeamObjective.js","opstools/FCFActivities/models/TeamObjective.js","opstools/FCFActivities/controllers/AddChooseActivity.js",
"js/typeahead.jquery.min.js","opstools/FCFActivities/controllers/FilteredElements.js","opstools/FCFActivities/models/base/ActivityImage.js","opstools/FCFActivities/models/ActivityImage.js","opstools/FCFActivities/controllers/ActivityReport.js","opstools/FCFActivities/controllers/ConfirmStep.js","opstools/FCFActivities/views/FCFActivities/FCFActivities.ejs","opstools/FCFActivities/controllers/FCFActivities.js","/site/labels/opstool-FCFActivities.js","opstools/FCFActivities/FCFActivities.js");
steal({id:"OpsPortal/production.js",waits:!0,has:"can/util/can.js can/util/attr/attr.js can/event/event.js can/util/array/each.js can/util/inserted/inserted.js can/util/jquery/jquery.js can/util/util.js can/util/bind/bind.js can/map/bubble.js can/util/string/string.js can/construct/construct.js can/util/batch/batch.js can/map/map.js can/list/list.js can/util/string/deparam/deparam.js can/route/route.js can/control/control.js can/control/route/route.js can/model/model.js can/view/view.js can/compute/compute.js can/view/scope/scope.js can/view/elements.js can/view/callbacks/callbacks.js can/view/scanner.js can/view/node_lists/node_lists.js can/view/parser/parser.js can/view/live/live.js can/view/render.js can/view/bindings/bindings.js can/view/mustache/mustache.js can/observe/observe.js can/component/component.js can/can.js can/view/ejs/ejs.js can/construct/super/super.js appdev/ad.js js/OpenAjax.js appdev/comm/hub.js appdev/util/uuid.js js/async.js appdev/util/async.js appdev/util/string.js appdev/config/config.js appdev/util/uiScrollbarSize.js appdev/config/data.js appdev/sal/web-jquery.js appdev/comm/socket.js appdev/model/model.js appdev/labels/lang.js appdev/labels/label.js appdev/widgets/ad_ui_reauth/ad_ui_reauth.css appdev/widgets/ad_icon_busy/ad_icon_busy.css appdev/widgets/ad_icon_busy/ad_icon_busy.js appdev/widgets/ad_ui_reauth/reauth_local.ejs appdev/widgets/ad_ui_reauth/reauth_cas.ejs appdev/widgets/ad_ui_reauth/ad_ui_reauth.js appdev/auth/reauth.js appdev/comm/service.js appdev/UIController.js appdev/control/control.js appdev/appdev.js OpsPortal/classes/OpsTool.js".split(" ")});
steal({id:"opstools/FCFActivities/production.css",waits:!0,has:["opstools/FCFActivities/FCFActivities.css"]});steal.pushPending();
steal.config({map:{"*":{"jquery/jquery.js":"jquery"}},paths:{jquery:"js/jquery.min.js","jquery-ui.js":"js/jquery-ui.min.js","bootstrap.js":"js/bootstrap/js/bootstrap.js","bootstrap.css":"js/bootstrap/css/bootstrap.min.css","bootstrap-datetimepicker.js":"js/bootstrap/js/bootstrap-datetimepicker.min.js","bootstrap-datetimepicker.css":"styles/bootstrap-datetimepicker.min.css","font-awesome.css":"styles/font-awesome.css","GenericList.js":"js/GenericList.js","dropzone.js":"js/dropzone/dropzone.min.js",
"dropzone.css":"js/dropzone/dropzone.min.css","bootstrap-table.js":"js/bootstraptable/bootstrap-table.js","bootstrap-table.css":"js/bootstraptable/bootstrap-table.css","bootstrapValidator.js":"js/bootstrapValidator.min.js","bootstrapValidator.css":"styles/bootstrapValidator.min.css","bootbox.js":"js/bootbox.min.js","FilteredBootstrapTable.js":"OpsPortal/controllers/FilteredBootstrapTable.js","OpsButtonBusy.js":"OpsPortal/classes/OpsButtonBusy.js","selectivity.js":"js/selectivity/selectivity-full.min.js",
"selectivity.css":"js/selectivity/selectivity-full.min.css","typeahead.js":"js/typeahead.jquery.min.js","moment.js":"js/moment.min.js"},shim:{jquery:{exports:"jQuery",packaged:!1,ignore:!0},"js/dependencies/sails.io.js":{packaged:!1,ignore:!0},"site/labels/appdev.js":{packaged:!1,ignore:!0},"jquery-ui.js":{packaged:!1},"bootstrap.js":{packaged:!1},"bootstrap-datetimepicker.js":{packaged:!1},"bootstrap-datetimepicker.css":{packaged:!1},"font-awesome.css":{packaged:!1},"js/jquery.sidr.min.js":{packaged:!1},
"dropzone.js":{packaged:!1},"dropzone.css":{packaged:!1},"bootstrap-table.js":{packaged:!1},"bootstrap-table.css":{packaged:!1},"bootstrapValidator.js":{packaged:!1},"bootstrapValidator.css":{packaged:!1},"bootbox.js":{packaged:!1},"opsportal/requirements.js":{ignore:!0},"opsportal/config":{ignore:!0},"site/labels/OpsPortal.js":{packaged:!1,ignore:!0},"site/labels/opstool-RBAC.js":{packaged:!1,ignore:!0},"selectivity.js":{packaged:!1},"selectivity.css":{packaged:!1},"site/labels/opstool-FCFActivities.js":{packaged:!1,
ignore:!0},"typeahead.js":{packaged:!1},"site/login-done":{packaged:!1},"moment.js":{packaged:!1}},amd:!1});steal.executed("stealconfig.js");
steal("can/view","can/view/ejs",function(a){return a.view.preloadStringRenderer("opstools_FCFActivities_views_Portal_Portal_ejs",a.EJS(function(b,c){with(c)with(b){var e=[];e.push('<div class="panel panel-default">\n    <div class="panel-heading">\n        <a class="ad-item-add btn btn-default" href="#">Add</a>\n        <a class="ad-item-delete btn btn-default" ');e.push(a.view.txt(2,"a","style",this,function(){var a=[];a.push('style="');a.push('float:right"');return a.join("")}));e.push(' href="#">Delete</a>\n    </div>\n    <div class="panel-body">\n        <div class="well" >Content for Portal</div>\n    </div>\n</div>');
return e.join("")}}))});steal.executed("opstools/FCFActivities/views/Portal/Portal.ejs");steal("appdev","//opstools/FCFActivities/views/Portal/Portal.ejs",function(){AD.Control.extend("opstools.FCFActivities.Portal",{init:function(a,b){this.options=b=AD.defaults({},b);this._super(a,b);this.dataSource=this.options.dataSource;this.initDOM()},initDOM:function(){},resize:function(){},".fcf-activity-new click":function(a,b){AD.comm.hub.publish("fcf.activity.new",{});b.preventDefault()}})});steal.executed("opstools/FCFActivities/controllers/Portal.js");
steal("appdev").then(function(){AD.Model.Base.extend("opstools.FCFActivities.UserTeam",{findAll:"GET /fcf_activities/userteam/find",describe:function(){return{ministry_name:"string",project_owner:"string"}},fieldId:"IDMinistry",fieldLabel:"ministry_name"},{model:function(){return AD.Model.get("opstools.FCFActivities.UserTeam")},getID:function(){return this.attr(this.model().fieldId)||"unknown id field"},getLabel:function(){return this.attr(this.model().fieldLabel)||"unknown label field"}})});steal.executed("opstools/FCFActivities/models/base/UserTeam.js");
steal("appdev","opstools/FCFActivities/models/base/UserTeam.js").then(function(){AD.Model.extend("opstools.FCFActivities.UserTeam",{},{})});steal.executed("opstools/FCFActivities/models/UserTeam.js");
steal("appdev").then(function(){AD.Model.Base.extend("opstools.FCFActivities.TeamActivity",{findAll:"GET /fcfactivities/teamactivities",create:"POST /fcfactivities/teamactivities",describe:function(){return{activity_name:"string",activity_description:"string",date_start:"date",date_end:"date"}},validations:{activity_name:["notEmpty"],activity_description:["notEmpty"],date_start:["notEmpty",'date:{"format":"mm/dd/yyyy"}'],date_end:['date:{"format":"mm/dd/yyyy"}']},fieldId:"id",fieldLabel:"activity_name"},
{model:function(){return AD.Model.get("opstools.FCFActivities.TeamActivity")},getID:function(){return this.attr(this.model().fieldId)||"unknown id field"},getLabel:function(){return this.attr(this.model().fieldLabel)||"unknown label field"}})});steal.executed("opstools/FCFActivities/models/base/TeamActivity.js");steal("appdev","opstools/FCFActivities/models/base/TeamActivity.js").then(function(){AD.Model.extend("opstools.FCFActivities.TeamActivity",{},{})});steal.executed("opstools/FCFActivities/models/TeamActivity.js");
steal("appdev","opstools/FCFActivities/models/UserTeam.js","opstools/FCFActivities/models/TeamActivity.js",function(){AD.Control.extend("opstools.FCFActivities.AddChooseMinistry",{CONST:{NEXT:"team.selected"},init:function(a,b){this.options=b=AD.defaults({},b);this._super(a,b);this.selectedMinistry=null;this.element.hide();this.initDOM();this.loadData()},initDOM:function(){var a=this,b=this.domToTemplate(this.element.find(".fcf-team-list > tbody:last"));can.view.ejs("FCFActivities_AddChooseMinistry",
b);this.tableMinistryTeams=this.element.find(".fcf-team-list");this.tableMinistryTeams.find("tbody:last").children().remove();this.buttons={};this.buttons.next=this.element.find("#fcf-activity-add-chooseteam-next");this.buttons.next.attr("disabled","disabled");this.buttons.next.addClass("disabled");this.Filter=new (AD.Control.get("OpsPortal.FilteredBootstrapTable"))(this.element,{tagFilter:".fcf-team-filter",tagBootstrapTable:".fcf-team-list",scrollToSelect:!0,modelID:"IDMinistry",cssSelected:"orange",
rowClicked:function(b){b&&(a.selectedMinistry=b,a.nextEnable())},rowDblClicked:function(b){b&&(a.selectedMinistry=b,a.nextEnable(),a.buttons.next.click())},termSelected:function(b){b&&(a.selectedMinistry=b,a.nextEnable(),a.buttons.next.click())},dataToTerm:function(a){return a?a.MinistryDisplayName+", "+a.ProjectOwner:""}})},loadData:function(){var a=this;this.Filter.load([]);this.Filter.busy();AD.comm.service.get({url:"/fcf_activities/userteam/find"}).fail(function(b){a.Filter.ready();console.error("problem looking up user's team :");
console.error(b)}).then(function(b){b=new can.List(b.data||b);a.Filter.load(b);a.Filter.ready()})},nextDisable:function(){this.buttons.next.attr("disabled","disabled");this.buttons.next.addClass("disabled")},nextEnable:function(){this.buttons.next.removeAttr("disabled");this.buttons.next.removeClass("disabled")},resize:function(a){this.element.find("[resize-adj]").each(function(b,c){var e=$(c),d=parseInt(e.attr("resize-adj"),10);e.css("height",a+d+"px")})},show:function(){this._super();this.Filter.resetView()},
value:function(){this.selectedMinistry.getID=function(){return this.IDMinistry};return this.selectedMinistry},"#fcf-activity-add-chooseteam-next click":function(){this.element.trigger(this.CONST.NEXT)}})});steal.executed("opstools/FCFActivities/controllers/AddChooseMinistry.js");
steal("appdev").then(function(){AD.Model.Base.extend("opstools.FCFActivities.TeamObjective",{findAll:"GET /fcf_activities/teamobjectives",describe:function(){return{description:"string"}},fieldId:"id",fieldLabel:"description"},{model:function(){return AD.Model.get("opstools.FCFActivities.TeamObjective")},getID:function(){return this.attr(this.model().fieldId)||"unknown id field"},getLabel:function(){return this.attr(this.model().fieldLabel)||"unknown label field"}})});steal.executed("opstools/FCFActivities/models/base/TeamObjective.js");
steal("appdev","opstools/FCFActivities/models/base/TeamObjective.js").then(function(){AD.Model.extend("opstools.FCFActivities.TeamObjective",{},{})});steal.executed("opstools/FCFActivities/models/TeamObjective.js");
steal("appdev","opstools/FCFActivities/models/TeamActivity.js","opstools/FCFActivities/models/TeamObjective.js",function(){AD.Control.extend("opstools.FCFActivities.AddChooseActivity",{CONST:{NEXT:"activity.selected",PREV:"activity.previous"},init:function(a,b){var c=this;this.options=b=AD.defaults({},b);this._super(a,b);this.selectedActivity=this.listActivities=this.selectedTeam=null;this.element.hide();this.initDOM();AD.comm.socket.subscribe("fcf_activity_new_external",function(a,b){if(c.selectedTeam&&
c.selectedTeam.getID()==b.team){var h=new (AD.Model.get("opstools.FCFActivities.TeamActivity"))(b.activity);c.listActivities.push(h)}})},initDOM:function(){var a=this,b=this.domToTemplate(this.element.find(".objectives-section"));can.view.ejs("FCFActivities_AddObjectives",b);this.element.find(".objectives-section").html("");this.titleMinistry=this.element.find(".fcf-activity-add-chooseActivity-teamName");this.tableTeamActivities=this.element.find(".fcf-activity-list");this.tableTeamActivities.find("tbody > tr").remove();
this.buttons={};this.buttons.next=this.element.find("#fcf-activity-add-chooseAssignment-next");this.buttons.next.attr("disabled","disabled");this.buttons.next.addClass("disabled");this.Filter=new (AD.Control.get("OpsPortal.FilteredBootstrapTable"))(this.element,{tagFilter:".fcf-activity-filter",tagBootstrapTable:".fcf-activity-list",scrollToSelect:!0,cssSelected:"orange",rowClicked:function(b){b&&(a.selectedActivity=b,a.nextEnable())},rowDblClicked:function(b){b&&(a.selectedActivity=b,a.nextEnable(),
a.buttons.next.click())},termSelected:function(b){b&&(a.selectedActivity=b,a.nextEnable(),a.buttons.next.click())},dataToTerm:function(a){return a?a.activity_name+", "+a.createdBy:""}});this.modalAdd=this.element.find("#fcf-modal-new-Activity");this.form=new AD.op.Form(this.modalAdd.find("#fcf-new-activity-form"));this.form.bind(AD.Model.get("opstools.FCFActivities.TeamActivity"));this.form.addField("objective","array",{notEmpty:{}});this.form.addValidation("date_end",{dateGreaterThan:{value:"date_start",
format:"mm/dd/yyyy"}});this.form.attach()},formClear:function(){this.form.clear()},formErrors:function(){return this.form.errors()},formValid:function(){return this.form.isValid()},formValues:function(){var a=this.form.values();a.objective&&!$.isArray(a.objective)&&(a.objective=[a.objective]);a.team=this.selectedTeam.getID();return a},loadData:function(a){var b=this;this.selectedTeam=a;this.selectedActivity=null;this.nextDisable();this.titleMinistry.text(a.attr("MinistryDisplayName"));this.Filter.busy();
AD.Model.get("opstools.FCFActivities.TeamActivity").findAll({team:a.getID()}).fail(function(a){b.Filter.ready();console.log(a)}).then(function(a){b.listActivities=a;b.Filter.load(a);b.Filter.ready()});AD.Model.get("opstools.FCFActivities.TeamObjective").findAll({team:a.getID()}).fail(function(a){console.log(a)}).then(function(a){b.form.elRemove(b.modalAdd.find('.objectives-section [name="objective"]'));b.modalAdd.find(".objectives-section div").remove();b.modalAdd.find(".objectives-section").append(can.view("FCFActivities_AddObjectives",
{objectives:a}));b.form.elAdd(b.modalAdd.find('.objectives-section [name="objective"]'))})},nextDisable:function(){this.buttons.next.attr("disabled","disabled");this.buttons.next.addClass("disabled")},nextEnable:function(){this.buttons.next.removeAttr("disabled");this.buttons.next.removeClass("disabled")},resize:function(a){this.element.find("[resize-adj]").each(function(b,c){var e=$(c),d=parseInt(e.attr("resize-adj"),10);e.css("height",a+d+"px")})},show:function(){this._super();this.Filter.resetView()},
value:function(){return this.selectedActivity},"#fcf-activity-add-chooseAssignment-next click":function(){this.element.trigger(this.CONST.NEXT)},"#fcf-activity-add-chooseAssignment-previous click":function(){this.element.trigger(this.CONST.PREV)},"#add-assignment click":function(){var a=this,b=this.formValues();if(this.formValid(b)){var c=AD.Model.get("opstools.FCFActivities.TeamActivity");c.create(b).fail(function(b){a.form.errorHandle(b)||console.error(b)}).then(function(b){b=b.data||b;console.log("returned Activity:",
b);b=new c(b);a.listActivities.push(b);a.Filter.selectRow(b);a.Filter.load(a.listActivities);a.formClear();a.modalAdd.modal("hide");a.selectedActivity=b;a.nextEnable()})}else b=this.formErrors(b),0<b.length&&bootbox.dialog({message:"Please fix these errors before trying again:<br>"+b.join("<br>"),title:"Invalid Form Data",buttons:{main:{label:"OK",className:"btn-primary",callback:function(){}}}})},"#cancel-add-assignment click":function(){this.formClear();this.modalAdd.modal("hide")}})});steal.executed("opstools/FCFActivities/controllers/AddChooseActivity.js");
!function(a){var b,c,e,d,h,f=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==
typeof a},toStr:function(a){return f.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,d){a.each(b,function(a,b){return d(b,a)})},map:a.map,filter:a.grep,every:function(b,d){var c=!0;return b?(a.each(b,function(a,e){return(c=d.call(null,e,a,b))?void 0:!1}),!!c):c},some:function(b,d){var c=!1;return b?(a.each(b,function(a,e){return(c=d.call(null,e,a,b))?!1:void 0}),!!c):c},mixin:a.extend,getUniqueId:function(){var a=0;return function(){return a++}}(),templatify:function(b){function d(){return""+
b}return a.isFunction(b)?b:d},defer:function(a){setTimeout(a,0)},debounce:function(a,b,d){var c,e;return function(){var i,g,m=this,f=arguments;return i=function(){c=null;d||(e=a.apply(m,f))},g=d&&!c,clearTimeout(c),c=setTimeout(i,b),g&&(e=a.apply(m,f)),e}},throttle:function(a,b){var d,c,e,i,g,m;return g=0,m=function(){g=new Date;e=null;i=a.apply(d,c)},function(){var f=new Date,t=b-(f-g);return d=this,c=arguments,0>=t?(clearTimeout(e),e=null,g=f,i=a.apply(d,c)):e||(e=setTimeout(m,t)),i}},noop:function(){}}}();
b='<span class="twitter-typeahead"></span>';c='<span class="tt-dropdown-menu"></span>';e='<div class="tt-dataset-%CLASS%"></div>';d='<span class="tt-suggestions"></span>';h='<div class="tt-suggestion"></div>';var n=function(){var a={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},
dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return f.isMsie()&&f.mixin(a.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),f.isMsie()&&7>=f.isMsie()&&f.mixin(a.input,{marginTop:"-1px"}),a}(),u=function(){function b(d){d&&d.el||a.error("EventBus initialized without el");
this.$el=a(d.el)}return f.mixin(b.prototype,{trigger:function(a){var b=[].slice.call(arguments,1);this.$el.trigger("typeahead:"+a,b)}}),b}(),s=function(){function a(b,e,k,f){if(!k)return this;e=e.split(c);k=f?d(k,f):k;for(this._callbacks=this._callbacks||{};f=e.shift();)this._callbacks[f]=this._callbacks[f]||{sync:[],async:[]},this._callbacks[f][b].push(k);return this}function b(a,d,c){return function(){for(var b,e=0,k=a.length;!b&&k>e;e+=1)b=!1===a[e].apply(d,c);return!b}}function d(a,b){return a.bind?
a.bind(b):function(){a.apply(b,[].slice.call(arguments,0))}}var c=/\s+/,e=function(){return window.setImmediate?function(a){setImmediate(function(){a()})}:function(a){setTimeout(function(){a()},0)}}();return{onSync:function(b,d,c){return a.call(this,"sync",b,d,c)},onAsync:function(b,d,c){return a.call(this,"async",b,d,c)},off:function(a){var b;if(!this._callbacks)return this;for(a=a.split(c);b=a.shift();)delete this._callbacks[b];return this},trigger:function(a){var d,f,j,h,l;if(!this._callbacks)return this;
a=a.split(c);for(j=[].slice.call(arguments,1);(d=a.shift())&&(f=this._callbacks[d]);)h=b(f.sync,this,[d].concat(j)),l=b(f.async,this,[d].concat(j)),h()&&e(l);return this}}}(),w=function(a){function b(a,d,c){for(var e,m=[],j=0,h=a.length;h>j;j++)m.push(f.escapeRegExChars(a[j]));return e=c?"\\b("+m.join("|")+")\\b":"("+m.join("|")+")",d?RegExp(e):RegExp(e,"i")}var d={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(c){function e(b){var d,k,i;return(d=
g.exec(b.data))&&(i=a.createElement(c.tagName),c.className&&(i.className=c.className),k=b.splitText(d.index),k.splitText(d[0].length),i.appendChild(k.cloneNode(!0)),b.parentNode.replaceChild(i,k)),!!d}function i(a,b){for(var d,c=0;c<a.childNodes.length;c++)d=a.childNodes[c],3===d.nodeType?c+=b(d)?1:0:i(d,b)}var g,c=f.mixin({},d,c);c.node&&c.pattern&&(c.pattern=f.isArray(c.pattern)?c.pattern:[c.pattern],g=b(c.pattern,c.caseSensitive,c.wordsOnly),i(c.node,e))}}(window.document),v=function(){function b(d){var e,
i,g,m,h=this,d=d||{};d.input||a.error("input is missing");e=f.bind(this._onBlur,this);i=f.bind(this._onFocus,this);g=f.bind(this._onKeydown,this);m=f.bind(this._onInput,this);this.$hint=a(d.hint);this.$input=a(d.input).on("blur.tt",e).on("focus.tt",i).on("keydown.tt",g);0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=f.noop);f.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(a){c[a.which||a.keyCode]||f.defer(f.bind(h._onInput,h,a))}):
this.$input.on("input.tt",m);this.query=this.$input.val();this.$overflowHelper=a('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:this.$input.css("font-family"),fontSize:this.$input.css("font-size"),fontStyle:this.$input.css("font-style"),fontVariant:this.$input.css("font-variant"),fontWeight:this.$input.css("font-weight"),wordSpacing:this.$input.css("word-spacing"),letterSpacing:this.$input.css("letter-spacing"),textIndent:this.$input.css("text-indent"),
textRendering:this.$input.css("text-rendering"),textTransform:this.$input.css("text-transform")}).insertAfter(this.$input)}function d(a){return a.altKey||a.ctrlKey||a.metaKey||a.shiftKey}var c;return c={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},b.normalizeQuery=function(a){return(a||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},f.mixin(b.prototype,s,{_onBlur:function(){this.resetInputValue();this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(a){var b=
c[a.which||a.keyCode];this._managePreventDefault(b,a);b&&this._shouldTrigger(b,a)&&this.trigger(b+"Keyed",a)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(a,b){var c,e;switch(a){case "tab":c=this.getHint();e=this.getInputValue();c=c&&c!==e&&!d(b);break;case "up":case "down":c=!d(b);break;default:c=!1}c&&b.preventDefault()},_shouldTrigger:function(a,b){var c;switch(a){case "tab":c=!d(b);break;default:c=!0}return c},_checkInputValue:function(){var a,d,c;a=this.getInputValue();
c=(d=b.normalizeQuery(a)===b.normalizeQuery(this.query))?this.query.length!==a.length:!1;this.query=a;d?c&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(a){this.query=a},getInputValue:function(){return this.$input.val()},setInputValue:function(a,b){this.$input.val(a);b?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,
!0)},getHint:function(){return this.$hint.val()},setHint:function(a){this.$hint.val(a)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var a,b;a=this.getInputValue();b=this.getHint();b=a!==b&&0===b.indexOf(a);!(""!==a&&b&&!this.hasOverflow())&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var a=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=
a},isCursorAtEnd:function(){var a,b,d;return a=this.$input.val().length,b=this.$input[0].selectionStart,f.isNumber(b)?b===a:document.selection?(d=document.selection.createRange(),d.moveStart("character",-a),a===d.text.length):!0},destroy:function(){this.$hint.off(".tt");this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null}}),b}(),q=function(){function b(d){d=d||{};d.templates=d.templates||{};d.source||a.error("missing source");d.name&&!/^[_a-zA-Z0-9-]+$/.test(d.name)&&a.error("invalid dataset name: "+
d.name);this.query=null;this.highlight=!!d.highlight;this.name=d.name||f.getUniqueId();this.source=d.source;this.displayFn=c(d.display||d.displayKey);this.templates=j(d.templates,this.displayFn);this.$el=a(e.replace("%CLASS%",this.name))}function c(a){function b(d){return d[a]}return a=a||"value",f.isFunction(a)?a:b}function j(a,b){function d(a){return"<p>"+b(a)+"</p>"}return{empty:a.empty&&f.templatify(a.empty),header:a.header&&f.templatify(a.header),footer:a.footer&&f.templatify(a.footer),suggestion:a.suggestion||
d}}var p="ttDataset",k="ttValue",i="ttDatum";return b.extractDatasetName=function(b){return a(b).data(p)},b.extractValue=function(b){return a(b).data(k)},b.extractDatum=function(b){return a(b).data(i)},f.mixin(b.prototype,s,{_render:function(b,c){function e(){var j,l;return j=a(d).css(n.suggestions),l=f.map(c,function(b){var d;return d=a(h).append(o.templates.suggestion(b)).data(p,o.name).data(k,o.displayFn(b)).data(i,b),d.children().each(function(){a(this).css(n.suggestionChild)}),d}),j.append.apply(j,
l),o.highlight&&w({className:"tt-highlight",node:j[0],pattern:b}),j}function j(){return o.templates.header({query:b,isEmpty:!l})}function r(){return o.templates.footer({query:b,isEmpty:!l})}if(this.$el){var l,o=this;this.$el.empty();l=c&&c.length;!l&&this.templates.empty?this.$el.html(o.templates.empty({query:b,isEmpty:!0})).prepend(o.templates.header?j():null).append(o.templates.footer?r():null):l&&this.$el.html(e()).prepend(o.templates.header?j():null).append(o.templates.footer?r():null);this.trigger("rendered")}},
getRoot:function(){return this.$el},update:function(a){var b=this;this.query=a;this.canceled=!1;this.source(a,function(d){b.canceled||a!==b.query||b._render(a,d)})},cancel:function(){this.canceled=!0},clear:function(){this.cancel();this.$el.empty();this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),b}(),x=function(){function b(c){var e,k,i,g=this,c=c||{};c.menu||a.error("menu is required");this.isOpen=!1;this.isEmpty=!0;this.datasets=f.map(c.datasets,
d);e=f.bind(this._onSuggestionClick,this);k=f.bind(this._onSuggestionMouseEnter,this);i=f.bind(this._onSuggestionMouseLeave,this);this.$menu=a(c.menu).on("click.tt",".tt-suggestion",e).on("mouseenter.tt",".tt-suggestion",k).on("mouseleave.tt",".tt-suggestion",i);f.each(this.datasets,function(a){g.$menu.append(a.getRoot());a.onSync("rendered",g._onRendered,g)})}function d(a){return new q(a)}return f.mixin(b.prototype,s,{_onSuggestionClick:function(b){this.trigger("suggestionClicked",a(b.currentTarget))},
_onSuggestionMouseEnter:function(b){this._removeCursor();this._setCursor(a(b.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){(this.isEmpty=f.every(this.datasets,function(a){return a.isEmpty()}))?this._hide():this.isOpen&&this._show();this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},
_setCursor:function(a,b){a.first().addClass("tt-cursor");!b&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(a){var b,d,c;if(this.isOpen){if(d=this._getCursor(),b=this._getSuggestions(),this._removeCursor(),c=b.index(d)+a,c=(c+1)%(b.length+1)-1,-1===c)return void this.trigger("cursorRemoved");-1>c&&(c=b.length-1);this._setCursor(a=b.eq(c));this._ensureVisible(a)}},_ensureVisible:function(a){var b,d,c;b=a.position().top;a=b+a.outerHeight(!0);
d=this.$menu.scrollTop();c=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10);0>b?this.$menu.scrollTop(d+b):a>c&&this.$menu.scrollTop(d+(a-c))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(a){this.$menu.css("ltr"===a?n.ltr:n.rtl)},moveCursorUp:function(){this._moveCursor(-1)},
moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(a){return a.length&&(q.extractDatum(a),q.extractValue(a),q.extractDatasetName(a)),null},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(a){f.each(this.datasets,function(b){b.update(a)})},empty:function(){f.each(this.datasets,function(a){a.clear()});this.isEmpty=
!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){this.$menu.off(".tt");this.$menu=null;f.each(this.datasets,function(a){a.destroy()})}}),b}(),y=function(){function d(b){var c,g,h,b=b||{};b.input||a.error("missing input");this.isActivated=!1;this.autoselect=!!b.autoselect;this.minLength=f.isNumber(b.minLength)?b.minLength:1;this.$node=e(b.input,b.withHint);c=this.$node.find(".tt-dropdown-menu");g=this.$node.find(".tt-input");h=this.$node.find(".tt-hint");g.on("blur.tt",
function(a){var b,d;b=document.activeElement;d=c.is(b);b=0<c.has(b).length;f.isMsie()&&(d||b)&&(a.preventDefault(),a.stopImmediatePropagation(),f.defer(function(){g.focus()}))});c.on("mousedown.tt",function(a){a.preventDefault()});this.eventBus=b.eventBus||new u({el:g});this.dropdown=(new x({menu:c,datasets:b.datasets})).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,
this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this);this.input=(new v({input:g,hint:h})).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,
this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this);this._setLanguageDirection()}function e(d,f){var g,h,j,l;g=a(d);h=a(b).css(n.wrapper);j=a(c).css(n.dropdown);l=g.clone().css(n.hint).css({backgroundAttachment:g.css("background-attachment"),backgroundClip:g.css("background-clip"),backgroundColor:g.css("background-color"),backgroundImage:g.css("background-image"),backgroundOrigin:g.css("background-origin"),backgroundPosition:g.css("background-position"),
backgroundRepeat:g.css("background-repeat"),backgroundSize:g.css("background-size")});l.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1});g.data(p,{dir:g.attr("dir"),autocomplete:g.attr("autocomplete"),spellcheck:g.attr("spellcheck"),style:g.attr("style")});g.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(f?n.input:n.inputWithNoHint);try{!g.attr("dir")&&g.attr("dir","auto")}catch(r){}return g.wrap(h).parent().prepend(f?
l:null).append(j)}function h(a){var b=a.find(".tt-input");f.each(b.data(p),function(a,d){f.isUndefined(a)?b.removeAttr(d):b.attr(d,a)});b.detach().removeData(p).removeClass("tt-input").insertAfter(a);a.remove()}var p="ttAttrs";return f.mixin(d.prototype,{_onSuggestionClicked:function(a,b){var d;(d=this.dropdown.getDatumForSuggestion(b))&&this._select(d)},_onCursorMoved:function(){var a=this.dropdown.getDatumForCursor();this.input.setInputValue(a.value,!0);this.eventBus.trigger("cursorchanged",a.raw,
a.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue();this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint();this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint();this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0;this.dropdown.open()},_onBlurred:function(){this.isActivated=!1;this.dropdown.empty();this.dropdown.close()},_onEnterKeyed:function(a,b){var d,c;d=this.dropdown.getDatumForCursor();
c=this.dropdown.getDatumForTopSuggestion();d?(this._select(d),b.preventDefault()):this.autoselect&&c&&(this._select(c),b.preventDefault())},_onTabKeyed:function(a,b){var d;(d=this.dropdown.getDatumForCursor())?(this._select(d),b.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close();this.input.resetInputValue()},_onUpKeyed:function(){var a=this.input.getQuery();this.dropdown.isEmpty&&a.length>=this.minLength?this.dropdown.update(a):this.dropdown.moveCursorUp();this.dropdown.open()},
_onDownKeyed:function(){var a=this.input.getQuery();this.dropdown.isEmpty&&a.length>=this.minLength?this.dropdown.update(a):this.dropdown.moveCursorDown();this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(a,b){this.input.clearHintIfInvalid();b.length>=this.minLength?this.dropdown.update(b):this.dropdown.empty();this.dropdown.open();this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint();
this.dropdown.open()},_setLanguageDirection:function(){var a;this.dir!==(a=this.input.getLanguageDirection())&&(this.dir=a,this.$node.css("direction",a),this.dropdown.setLanguageDirection(a))},_updateHint:function(){var a,b,d,c,e,h;(a=this.dropdown.getDatumForTopSuggestion())&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(b=this.input.getInputValue(),d=v.normalizeQuery(b),c=f.escapeRegExChars(d),e=RegExp("^(?:"+c+")(.+$)","i"),h=e.exec(a.value),h?this.input.setHint(b+h[1]):this.input.clearHint()):
this.input.clearHint()},_autocomplete:function(a){var b,d,c;b=this.input.getHint();d=this.input.getQuery();a=a||this.input.isCursorAtEnd();b&&d!==b&&a&&(c=this.dropdown.getDatumForTopSuggestion(),c&&this.input.setInputValue(c.value),this.eventBus.trigger("autocompleted",c.raw,c.datasetName))},_select:function(a){this.input.setQuery(a.value);this.input.setInputValue(a.value,!0);this._setLanguageDirection();this.eventBus.trigger("selected",a.raw,a.datasetName);this.dropdown.close();f.defer(f.bind(this.dropdown.empty,
this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(a){a=f.toStr(a);this.isActivated?this.input.setInputValue(a):(this.input.setQuery(a),this.input.setInputValue(a,!0));this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy();this.dropdown.destroy();h(this.$node);this.$node=null}}),d}();!function(){var b,d,c;b=a.fn.typeahead;d="ttTypeahead";c={initialize:function(b,c){return c=f.isArray(c)?
c:[].slice.call(arguments,1),b=b||{},this.each(function(){var e,h=a(this);f.each(c,function(a){a.highlight=!!b.highlight});e=new y({input:h,eventBus:new u({el:h}),withHint:f.isUndefined(b.hint)?!0:!!b.hint,minLength:b.minLength,autoselect:b.autoselect,datasets:c});h.data(d,e)})},open:function(){return this.each(function(){var b;(b=a(this).data(d))&&b.open()})},close:function(){return this.each(function(){var b;(b=a(this).data(d))&&b.close()})},val:function(b){function c(){var e;(e=a(this).data(d))&&
e.setVal(b)}function e(a){var b,c;return(b=a.data(d))&&(c=b.getVal()),c}return arguments.length?this.each(c):e(this.first())},destroy:function(){return this.each(function(){var b,c=a(this);(b=c.data(d))&&(b.destroy(),c.removeData(d))})}};a.fn.typeahead=function(b){var e;return c[b]&&"initialize"!==b?(e=this.filter(function(){return!!a(this).data(d)}),c[b].apply(e,[].slice.call(arguments,1))):c.initialize.apply(this,arguments)};a.fn.typeahead.noConflict=function(){return a.fn.typeahead=b,this}}()}(window.jQuery);
steal.executed("js/typeahead.jquery.min.js");
steal("appdev","js/typeahead.jquery.min.js",function(){AD.Control.extend("opstools.FCFActivities.FilteredElements",{init:function(a,b){this.options=b=AD.defaults({tagFilter:".fe-filter",tagEl:".fe-el",elCursorOn:function(){},elSelected:function(){},elToTerm:function(a){return a.innerHtml()}},b);this.searchTerms=[];this.elHash={};this.attachDOM();this.refresh()},attachDOM:function(){var a=this;this.teamFilter=this.element.find(this.options.tagFilter).typeahead({hint:!0,highlight:!0,minLength:1},{name:"teams",
displayKey:"value",source:function(b,c){a.filter(b,c)}});this.teamFilter.on("typeahead:closed",function(){console.log("typeahead:closed")});this.teamFilter.on("typeahead:cursorchanged",function(){console.log("typeahead:cursorchanged");var b=a.teamFilter.typeahead("val");(b=a.elHash[b])&&a.options.elCursorOn(b)});this.teamFilter.on("typeahead:selected",function(){console.log("typeahead:selected");var b=a.teamFilter.typeahead("val");(b=a.elHash[b])&&a.options.elSelected(b)});this.teamFilter.on("typeahead:autocompleted",
function(){console.log("typeahead:autocompleted");var b=a.teamFilter.typeahead("val");if(b=a.elHash[b])a.teamFilter.typeahead("close"),a.options.elSelected(b)})},filter:function(a,b){var c,e;c=[];e=RegExp(AD.util.string.quoteRegExp(a),"i");$.each(this.searchTerms,function(a,b){e.test(b)&&c.push({value:b})});b(c);this.filterElements(c)},filterElements:function(a){var b=this,c=[];a.forEach(function(a){(a=b.elHash[a.value])&&c.push(a)});for(var e in b.elHash)a=b.elHash[e],-1!=c.indexOf(a)?a.show():a.hide()},
refresh:function(){var a=this;this.searchTerms=[];this.elHash={};this.element.find(this.options.tagEl).each(function(b,c){var e=$(c),d=a.options.elToTerm(e);a.searchTerms.push(d);a.elHash[d]=e})},selectedEl:function(){return this.elHash[this.teamFilter.typeahead("val")]}})});steal.executed("opstools/FCFActivities/controllers/FilteredElements.js");
steal("appdev").then(function(){AD.Model.Base.extend("opstools.FCFActivities.ActivityImage",{findAll:"GET /fcf_activities/activityimage",findOne:"GET /fcf_activities/activityimage/{id}",create:"POST /fcf_activities/activityimage/create",update:"PUT /fcf_activities/activityimage/update/{id}",destroy:"DELETE /fcf_activities/activityimage/destroy/{id}",describe:function(){return{image:"string",caption:"string",date:"date",uploadedBy:"string",tags:"string"}},fieldId:"id",fieldLabel:"caption"},{model:function(){return AD.Model.get("opstools.FCFActivities.ActivityImage")},
getID:function(){return this.attr(this.model().fieldId)||"unknown id field"},getLabel:function(){return this.attr(this.model().fieldLabel)||"unknown label field"}})});steal.executed("opstools/FCFActivities/models/base/ActivityImage.js");steal("appdev","opstools/FCFActivities/models/base/ActivityImage.js").then(function(){AD.Model.extend("opstools.FCFActivities.ActivityImage",{},{})});steal.executed("opstools/FCFActivities/models/ActivityImage.js");
steal("appdev","opstools/FCFActivities/controllers/FilteredElements.js","opstools/FCFActivities/models/ActivityImage.js","dropzone.js","dropzone.css","selectivity.js","selectivity.css",function(){AD.Control.extend("opstools.FCFActivities.ActivityReport",{CONST:{NEXT:"activity_report.confirm",FINISH:"activity_report.finish",PREV:"activity_report.previous",tags:{".fcf-activity-team-name":"title string",".fcf-activity-report-activities":"container for Activities",".fcf-activity-activity-name":"activity name container",
".fcf-activity-activity-project-name":"activity -> project name",".fcf-activity-activity-team-name":"activity -> team name",".fcf-activity-report-activity-images":"image list","#fcf-activity-image-upload":"dropzone element/object ",".fcf-activity-image-form":"the image form","#image-image":"form element: image reference","#image-caption":"form input: image caption","#image-date":"form input: date ","#image-tags":"form input: tags of people",".fcf-activities-people-objects":"form input: objects of people"}},
init:function(a,b){this.options=b=AD.defaults({},b);this._super(a,b);this.listImages=this.listActivityTags=this.listActivities=this.selectedActivity=this.selectedTeam=null;this.listTeammates=[];this.currentlyEditingImage=this.whoami=null;this.isFormLoaded=!1;this.values={};this.values.taggedPeople=[];this.dom={};this.obj={};this.element.hide();this.initDOM()},addActivity:function(){},alertDeleteConfirm:function(a){bootbox.dialog({title:"Delete Confirm",message:"Are you sure you want to delete this image?",
buttons:{yes:{label:"yes",className:"btn-primary",callback:a.cbSecond},no:{label:"no",className:"btn-primary"}}})},alertDeleteInvalid:function(){bootbox.dialog({message:"This image has other people tagged in it.  In order to delete it, you need to notify your ministry leader.",title:"Delete Not Allowed",buttons:{main:{label:"OK",className:"btn-primary",callback:function(){}}}})},alertUnsavedChanges:function(a){bootbox.dialog({message:a.message||"You have made changes that are not saved.  What should I do?",
title:a.title||"Unsaved Changes",buttons:{dont:{label:a.labelDont||"Don't Save",className:"btn-default",callback:a.cbDont||function(){}},cancel:{label:a.labelCancel||"Cancel",className:"btn-default",callback:a.cbCancel||function(){}},save:{label:a.labelSave||"Save",className:"btn-primary",callback:a.cbSave||function(){}}}})},buttonDisable:function(a){this.dom.buttons[a]?(this.dom.buttons[a].attr("disabled","disabled"),this.dom.buttons[a].addClass("disabled")):console.error("button ["+a+"] not recognized!")},
buttonEnable:function(a){this.dom.buttons[a]?(this.dom.buttons[a].removeAttr("disabled"),this.dom.buttons[a].removeClass("disabled")):console.error("button ["+a+"] not recognized!")},clearImageList:function(){this.element.find(".fcf-activity-report-activity-images").children().remove()},clearForm:function(){this.currentlyEditingImage=null;this.dom.dropzone.find(".dz-message").show();this.dom.dropzone.find("img").prop("src","").hide();this.dom.inputImage.val("");this.dom.inputCaption.val("");this.dom.inputDate.data("DateTimePicker").date(null);
this.dom.inputTags.selectivity("value",[]);this.dom.peopleObjects.find("li.fcf-activity-people-objects").show();this.values.image="";this.values.caption="";this.values.date="";this.values.taggedPeople=[];this.buttonDisable("save");this.buttonDisable("cancel");this.dom.buttons.del.hide()},formDelete:function(){var a=this;if(this.currentlyEditingImage){var b=this.currentlyEditingImage.activity,b=b.id||b;this.currentlyEditingImage.destroy().fail(function(){}).then(function(c){a.clearForm();c.default_image&&
a.listActivities.forEach(function(a){a.id==b&&a.attr("imageURL",c.default_image)});a.refreshPeopleTaggedInActivities(b);a.refreshPeopleTaggedInImages()})}},formErrors:function(){var a=[],b=this.formValues();""==b.image&&a.push("An Image is Required.");""==b.caption&&a.push("A caption is Required.");""==b.date&&a.push("A date is Required.");0==b.taggedPeople.length&&a.push("At least one person should be tagged in this photo.");return a},loadForm:function(a){var b=this;console.log("... loading Form with image:",
a.getID());this.currentlyEditingImage=a;this.dom.dropzone.find(".dz-message").hide();this.dom.dropzone.find("img").prop("src",a.image).show();this.values.image=a.image;this.dom.inputImage.val(a.image);this.dom.inputCaption.val(a.caption);this.values.caption=a.caption;this.dom.inputDate.data("DateTimePicker").date(new Date(a.date));this.values.date=a.date;this.dom.inputTags.selectivity("value",[]);this.dom.peopleObjects.find("li.fcf-activity-people-objects").show();a.taggedPeople.forEach(function(a){b.dom.peopleObjects.find('[data-person-id="'+
a+'"]').click()});this.values.taggedPeople=a.taggedPeople;this.dom.inputActivity.val(this.selectedActivity.getID?this.selectedActivity.getID():this.selectedActivity.id);this.buttonEnable("save");this.buttonEnable("cancel");a.uploadedBy.IDPerson==this.whoami.IDPerson?(this.dom.buttons.del.show(),this.buttonEnable("del")):this.dom.buttons.del.hide()},formSubmit:function(){var a=this,b=AD.sal.Deferred(),c=this.formValues();if(this.formValidate(c))this.currentlyEditingImage?(this.currentlyEditingImage.attr(c),
this.currentlyEditingImage.attr("taggedPeople",c.taggedPeople),this.currentlyEditingImage.save().fail(function(a){console.error(a);b.reject(a)}).then(function(d){console.log(" ... returnedData:",d);a.currentlyEditingImage.attr("image",d.image);a.currentlyEditingImage.attr("taggedPeople",d.taggedPeople);d.default_image&&a.listActivities.forEach(function(a){a.id==c.activity&&a.attr("imageURL",d.default_image)});a.clearForm();a.refreshPeopleTaggedInActivities(c.activity);a.refreshPeopleTaggedInImages(d);
b.resolve()})):AD.Model.get("opstools.FCFActivities.ActivityImage").create(c).fail(function(a){console.error(a);b.reject(a)}).then(function(d){d=d.data||d;a.listImages.unshift(d);a.clearForm();d.default_image&&a.listActivities.forEach(function(a){a.id==c.activity&&a.attr("imageURL",d.default_image)});a.refreshPeopleTaggedInActivities(c.activity);a.refreshPeopleTaggedInImages(d);b.resolve()});else{var e=this.formErrors();0<e.length?bootbox.dialog({message:"Please fix these problems before trying again:<br>"+
e.join("<br>"),title:"Invalid Form Data",buttons:{main:{label:"OK",className:"btn-primary",callback:function(){}}}}):bootbox.dialog({message:"something isn't right about this form, but I can't tell you what. Just make sure everything is properly filled out and try again.",title:"Invalid Form Data",buttons:{main:{label:"OK",className:"btn-primary",callback:function(){}}}});b.reject()}return b},formValidate:function(a){var b;return b=(b=(b=(b=""!=a.image)&&""!=a.caption)&&""!=a.date)&&0<a.taggedPeople.length},
formValues:function(){var a={};this.dom.imageForm.serializeArray().forEach(function(b){a[b.name]=b.value});var b=a.date.split("/");a.date=3==b.length?b[2]+"-"+b[0]+"-"+b[1]:"";var c=[];this.dom.inputTags.selectivity("data").forEach(function(a){c.push(a.id)});a.taggedPeople=c;return a},hasUnsavedChanges:function(){var a=this,b=!1,c=this.formValues(),b=(b=(b=b||this.values.image!=c.image)||this.values.caption!=c.caption)||this.values.date!=c.date;this.values.taggedPeople.forEach(function(a){-1==c.taggedPeople.indexOf(a)&&
(b=!0)});c.taggedPeople.forEach(function(c){-1==a.values.taggedPeople.indexOf(c)&&(b=!0)});return b},initDOM:function(){var a=this,b=this,c=this.domToTemplate(this.element.find(".fcf-activity-tag-list"));can.view.ejs("FCFActivities_ActivityReport_ActivityTaggedPeople",c);this.element.find(".fcf-activity-tag-list").html(" ");c=this.domToTemplate(this.element.find(".fcf-activity-image-tag-list"));can.view.ejs("FCFActivities_ActivityReport_ImageTaggedPeople",c);this.element.find(".fcf-activity-image-tag-list").html(" ");
c=this.domToTemplate(this.element.find(".fcf-activity-report-activities"));c=AD.util.string.replaceAll(c,'src="images/fcf_activities/img1.jpg"','src="<%= activity.attr("imageURL") %>"');c=AD.util.string.replaceAll(c,"images/fcf_activities/tag.jpg","/images/fcf_activities/tag.jpg");can.view.ejs("FCFActivities_ActivityReport_ActivityList",c);c=this.domToTemplate(this.element.find(".fcf-activity-report-activity-images"));c=AD.util.string.replaceAll(c,'src="images/fcf_activities/img2.jpg"',"src=\"<%= image.attr('image') %>\"");
can.view.ejs("FCFActivities_ActivityReport_ImageList",c);c=this.domToTemplate(this.element.find(".fcf-activitiy-people-list"));c=AD.util.string.replaceAll(c,'src=""',"src=\"<%= person.attr('avatar') %>\"");can.view.ejs("FCFActivities_ActivityReport_PersonList",c);this.dom.titleTeam=this.element.find(".fcf-activity-team-name");this.dom.listActivities=this.element.find(".fcf-activity-report-activities");this.dom.listActivities.children().remove();this.dom.listActivities.css("height","600px");this.dom.titleActivity=
this.element.find(".fcf-activity-activity-name");this.dom.activityStartDate=this.element.find(".fcf-activity-activity-startdate");this.dom.activityEndDate=this.element.find(".fcf-activity-activity-enddate");this.dom.titleActivityProject=this.element.find(".fcf-activity-activity-project-name");this.dom.titleActivityTeam=this.element.find(".fcf-activity-activity-team-name");this.dom.listImages=this.element.find(".fcf-activity-report-activity-images");this.dom.listImages.children().remove();this.dom.listImages.css("height",
"400px");AD.comm.csrf().then(function(a){b.dom.dropzone=b.element.find("#fcf-activity-image-upload");b.obj.dropzone=new Dropzone("#fcf-activity-image-upload",{url:"/fcf_activities/activityimageupload",paramName:"imageFile",maxFilesize:100,uploadMultiple:!1,acceptedFiles:".jpg, .jpeg, .psd, .gif, .png, .pdf",headers:{"X-CSRF-Token":a}});var c=b.dom.dropzone.find("img");c.on("load",function(){var a=parseInt(b.dom.dropzone.css("height"));parseInt(c.css("height"))>a&&(a=parseInt(b.dom.dropzone.css("width")),
a-=AD.util.uiScrollbarSize().width+4,c.css("width",a))});b.obj.dropzone.on("success",function(a,d){b.obj.dropzone.removeFile(a);b.dom.dropzone.addClass("nopadding").css("padding-top","0px").css("padding-bottom","0px");b.dom.dropzone.find(".dz-message").hide();var e=parseInt(b.dom.dropzone.css("width"));c.css("width",e).prop("src",d.data.path).show();b.dom.inputImage.val(d.data.name);b.buttonEnable("save");b.buttonEnable("cancel")});b.obj.dropzone.on("error",function(a){c.prop("src","").hide();a.previewElement.addEventListener("click",
function(){b.obj.dropzone.removeFile(a)})});b.obj.dropzone.on("sending",function(){b.buttonDisable("save");b.buttonDisable("cancel")});b.dom.dropzone.find("img").prop("src","").hide()}).fail(function(){console.error("*** unable to get CSRF token!  No Dropzone for you! ")});this.dom.imageForm=this.element.find(".fcf-activity-image-form");this.dom.inputImage=this.dom.imageForm.find("#image-image");this.dom.inputActivity=this.dom.imageForm.find("#image-activity");this.dom.inputCaption=this.dom.imageForm.find("#image-caption");
this.dom.inputDate=this.dom.imageForm.find("#image-date");this.dom.inputTags=this.element.find("#image-tags");this.dom.peopleObjects=this.element.find(".fcf-activitiy-people-list");this.dom.inputDate.datetimepicker({format:"MM/DD/YYYY",minDate:"01/01/1970"}).on("dp.change",function(){a.buttonEnable("save");a.buttonEnable("cancel")});var c=this.dom.inputTags.prop("app-label-key")||"fcf.activity.image.form.tags",e=AD.lang.label.getLabel(c);e||(console.warn("labelKey:"+c+" :: no label returned."),e=
"*people in photo");this.dom.inputTags.selectivity({items:[{id:0,text:"no items loaded"}],multiple:!0,placeholder:e});this.dom.inputTags.on("change",function(b){a.personSelected(b);a.tagsAdjustHeight()});this.dom.resize={};this.dom.resize.tags=this.dom.inputTags.find(".selectivity-multiple-input-container");this.dom.resize.tagsCurrHeight=0;this.dom.resize.tagsBaseHeight=0;this.dom.resize.tagsTotalHeight=0;this.dom.resize.profileScroller=this.element.find("#profilelist-scroll");this.dom.peopleObjects.children().remove();
this.dom.buttons={};this.dom.buttons.save=this.element.find("#fcf-activity-image-form-save");this.dom.buttons.cancel=this.element.find("#fcf-activity-image-form-cancel");this.dom.buttons.del=this.element.find("#fcf-activity-image-form-delete");this.dom.resize.pagination=this.element.find("#fcf-activity-pagination");this.dom.resize.navButtons=this.element.find("#fcf-activity-actionsbtn");this.dom.resize.navButtonsInner=this.dom.resize.navButtons.find(".btnactions");this.dom.resize.contentSection=this.element.find("#fcf-activity-content-section");
this.dom.resize.activityList=this.dom.resize.contentSection.find(".fcf-activity-contentsection-activityList");this.dom.resize.activityListLabel=this.dom.resize.activityList.find(".fcf-activity-activityList-label");this.dom.resize.activityListContent=this.dom.listActivities},setTeam:function(a){var b=this;this.selectedTeam=a;AD.comm.service.get({url:"/fcf_activities/teammembers",params:{teamID:a.getID()}}).fail(function(){console.error("problem looking up teammembers: teamID:"+a.getID())}).then(function(a){var e=
[],a=a.data||a;a.forEach(function(a){e.push({id:a.IDPerson,text:a.display_name})});b.dom.inputTags.selectivity({items:e,multiple:!0,placeholder:"people in photo"});b.listTeammates=new can.List(a);b.dom.peopleObjects.children().remove();b.dom.peopleObjects.append(can.view("FCFActivities_ActivityReport_PersonList",{people:b.listTeammates}))})},loadData:function(a){var b=this;this.selectedActivity=a;var c=!1;AD.util.async.series([function(a){b.clearForm();a()},function(e){b.selectedTeam&&a.team==b.selectedTeam.getID()&&
(c=!0);e()},function(e){c?e():AD.Model.get("opstools.FCFActivities.UserTeam").findAll().fail(function(a){e(a)}).then(function(d){d.each(function(d){d.getID()==a.team&&(b.selectedTeam=d)});b.selectedTeam.getID==a.team?e():e(Error("can't find proper team!"))})},function(a){var d=b.selectedTeam.getID();AD.comm.service.get({url:"/fcfactivities/activityreport/activities",params:{team:d}}).fail(function(b){a(b)}).then(function(d){d=new can.List(d);b.listActivities=d;a()})},function(){b.dom.titleTeam.text(b.selectedTeam.attr("MinistryDisplayName"));
b.dom.listActivities.find("div.fcf-activity-list-item").remove();b.dom.listActivities.append(can.view("FCFActivities_ActivityReport_ActivityList",{activities:b.listActivities,ProjectName:b.selectedTeam.ProjectOwner,whoami:b.whoami}));b.refreshPeopleTaggedInActivities();b.selectActivity(a);b.updateImageList()}],function(){})},refreshPeopleTaggedInActivities:function(a){var b=this,c=[];"undefined"==typeof a?b.listActivities.each(function(a){c.push(a.id)}):c=[a];var e={};AD.util.async.series([function(a){AD.comm.service.get({url:"/fcf_activities/activityreport/relevantTags",
params:{activities:c}}).fail(function(b){a(b)}).then(function(b){e=b;a()})},function(){for(var a in e){var c=e[a],f=b.element.find(".fcf-activity-tag-list[activityID="+a+"]");f.html(" ");f.append(can.view("FCFActivities_ActivityReport_ActivityTaggedPeople",{taggedPeople:c,teammates:b.listTeammates,whoami:b.whoami}));var n=!1;c.forEach(function(a){a==b.whoami.IDPerson&&(n=!0)});c=b.element.find(".fcf-activity-list-item-tag[activityID="+a+"]");n?c.show():c.hide()}}],function(){})},refreshPeopleTaggedInImages:function(a){var b=
this,c=[];"undefined"==typeof a?c=this.listImages:c.push(a);c.forEach(function(a){var d=b.element.find(".fcf-activity-image-tag-list[imageID="+a.id+"]");d.html(" ");d.append(can.view("FCFActivities_ActivityReport_ImageTaggedPeople",{taggedPeople:a.taggedPeople,teammates:b.listTeammates,whoami:b.whoami}))})},resize:function(a){console.log("////// resize! : "+a);this.element.find("[resize-adj]").each(function(b,c){var e=$(c),d=parseInt(e.attr("resize-adj"),10);e.css("height",a+d+"px")});0==this.dom.resize.tagsBaseHeight&&
(this.dom.resize.tagsBaseHeight=this.dom.resize.tags.outerHeight(!0));this.dom.resize.tagsTotalHeight=this.dom.resize.profileScroller.outerHeight(!0)+this.dom.resize.tagsBaseHeight;this.dom.resize.tagsCurrHeight=0;this.tagsAdjustHeight()},selectActivity:function(a){a=a.getID?a.getID():a.id;this.dom.listActivities.find(".active").removeClass("active");this.dom.listActivities.find('[activity-id="'+a+'"]').addClass("active");this.dom.inputActivity.val(a)},selectImageRow:function(a){this.dom.listImages.find(".active").removeClass("active");
a&&a.addClass("active")},tagsAdjustHeight:function(){var a=this.dom.resize.tags.outerHeight(!0);if(a!=this.dom.resize.tagsCurrHeight){var b=this.dom.resize.tagsTotalHeight-a;50<b?(this.dom.resize.profileScroller.css("height",b+"px"),this.dom.resize.profileScroller.parent().show()):this.dom.resize.profileScroller.parent().hide();this.dom.resize.tagsCurrHeight=a}},personSelected:function(a){a.added?this.dom.peopleObjects.find('[data-person-id="'+a.added.id+'"]').hide():a.removed&&this.dom.peopleObjects.find('[data-person-id="'+
a.removed.id+'"]').show();this.buttonEnable("save");this.buttonEnable("cancel")},updateImageList:function(){var a=this,b=this.selectedActivity.getID?this.selectedActivity.getID():this.selectedActivity.id;AD.Model.get("opstools.FCFActivities.ActivityImage").findAll({activity:b}).fail(function(a){console.error(a)}).then(function(b){b=b.data||b;console.log("ImageList:");console.log(b);a.clearImageList();a.listImages=b;a.dom.listImages.append(can.view("FCFActivities_ActivityReport_ImageList",{images:b,
teammates:a.listTeammates,whoami:a.whoami}));a.refreshPeopleTaggedInImages();a.selectImageRow(a.dom.listImages.find(".addImage"));a.clearForm()});this.dom.titleActivity.text(this.selectedActivity.activity_name);this.dom.activityStartDate.text(this.toDate(this.selectedActivity.date_start));this.dom.activityEndDate.text(this.toDate(this.selectedActivity.date_end));this.dom.titleActivityProject.text(this.selectedTeam.ProjectOwner);this.dom.titleActivityTeam.text(this.selectedTeam.MinistryDisplayName)},
toDate:function(a){return!a||""==a?"ongoing":a.split("T")[0]},setWhoami:function(a){this.whoami=a},"div.fcf-activity-list-item  click":function(a,b){var c=this;if(this.hasUnsavedChanges()){var e=function(){c.selectedActivity=a.data("activity");c.selectActivity(c.selectedActivity);c.updateImageList()};this.alertUnsavedChanges({cbDont:function(){e()},cbSave:function(){c.formSubmit().fail(function(){}).then(function(){e()})}})}else this.selectedActivity=a.data("activity"),this.selectActivity(this.selectedActivity),
this.updateImageList();b.preventDefault()},"div.fcf-activity-image-list-item.addImage click":function(a){var b=this,c=function(){b.selectImageRow(a);b.clearForm()};this.hasUnsavedChanges()?this.alertUnsavedChanges({cbDont:function(){c()},cbSave:function(){b.formSubmit().fail(function(){}).then(function(){c()})}}):c()},"div.fcf-activity-image-list-item:not(.addImage) click":function(a){var b=this,c=function(){b.selectImageRow(a);b.loadForm(a.data("image"))};this.hasUnsavedChanges()?this.alertUnsavedChanges({cbDont:function(){c()},
cbSave:function(){b.formSubmit().fail(function(){}).then(function(){c()})}}):c()},".fcf-activity-people-objects click":function(a,b){a.hide();var c=a.data("person"),e=c.attr("IDPerson"),d=this.dom.inputTags.selectivity("data"),h=[];d.forEach(function(a){h.push(a.id)});-1==h.indexOf(e)&&(c={id:c.attr("IDPerson"),text:c.attr("display_name")},d.push(c));this.dom.inputTags.selectivity("data",d);b.preventDefault()},"#fcf-activity-image-form-save click":function(a,b){this.formSubmit();b.preventDefault()},
"#fcf-activity-image-form-cancel click":function(a,b){var c=this;this.hasUnsavedChanges()?this.alertUnsavedChanges({cbDont:function(){c.clearForm()},cbSave:function(){c.formSubmit().fail(function(){}).then(function(){c.clearForm()})}}):c.clearForm();b.preventDefault()},"#fcf-activity-image-form-delete click":function(a,b){var c=this,e=this.formValues();1==e.taggedPeople.length&&e.taggedPeople[0]==this.whoami.IDPerson?this.alertDeleteConfirm({cbSecond:function(){c.formDelete()}}):this.alertDeleteInvalid();
b.preventDefault()},"#fcf-activity-image-form-nav-finish click":function(){var a=this,b=function(){a.clearForm();a.element.trigger(a.CONST.FINISH)};this.hasUnsavedChanges()?this.alertUnsavedChanges({cbDont:function(){b()},cbSave:function(){a.formSubmit().fail(function(){}).then(function(){b()})}}):b()},"#fcf-activity-image-form-nav-previous click":function(){var a=this,b=function(){a.clearForm();a.element.trigger(a.CONST.PREV)};this.hasUnsavedChanges()?this.alertUnsavedChanges({cbDont:function(){b()},
cbSave:function(){a.formSubmit().fail(function(){}).then(function(){b()})}}):b()}})});steal.executed("opstools/FCFActivities/controllers/ActivityReport.js");
steal("appdev",function(){AD.Control.extend("opstools.FCFActivities.ConfirmStep",{init:function(a,b){this.options=b=AD.defaults({templateDOM:"//opstools/FCFActivities/views/ConfirmStep/ConfirmStep.ejs"},b);this._super(a,b);this.initDOM()},initDOM:function(){},".fcf-activity-confirm click":function(a,b){this.element.modal("hide");this.element.trigger("confirmed");b.preventDefault()}})});steal.executed("opstools/FCFActivities/controllers/ConfirmStep.js");
steal("can/view","can/view/ejs",function(a){return a.view.preloadStringRenderer("opstools_FCFActivities_views_FCFActivities_FCFActivities_ejs",a.EJS(function(b,c){with(c)with(b){var e=[];e.push('<div class="opsportal-stage-container opsportal-padding-bottom-2x" >\n<\!-- \n#  Appdev Label Info:\n#label_context:opstool-FCFActivities\n#language_code:en\n--\>\n<div id="fcf-activity-portal" class="container">\n\t<div class="clearfix">\n\t\t<div class="col-md-12 column">\n\t\t\t<nav class="navbar navbar-default" role="navigation">\n\t\t\t\t<div class="navbar-header">\n\t\t\t\t\t <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button> <a class="navbar-brand" href="#">Activities: </a>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\n\t\t\t\t\t<ul class="nav navbar-nav navbar-right">\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href="#fcf-activities/AddActivity1" class="fcf-activity-new">New/Update Activity</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</nav>\n\t\t\t<div class="jumbotron well">\n\t\t\t\t<h1>\n\t\t\t\t\tActivities\n\t\t\t\t</h1>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n                <\!--PAGE 1--\>\n                <div id="fcf-activity-add-chooseTeam" class="container rbac-display rbac-page1">\n                  <div id="wrap" class="col-md-12" resize-adj="-20">\n                        <\!--Top--\>\n                        <div id="pagination" class="col-md-12">\n                          <div class="row">\n                            <div class="col-md-10"></div>\n                            <div class="col-md-2 align-right marginbot5"><span class="pull-right" appp-label-key="fcf.assignment.Choose.Team.step1">Step 1 of 3</span></div>\n                          </div>\n                        </div>\n                        <\!--End Top--\>\n                      <\!--Content--\>      \n                      <div class="col-md-12">\n                        <div id="content" class="col-md-12" resize-adj="-120">\n                          <div class="col-md-12 nopadding">\n                              <h4><span appp-label-key="fcf.assignment.Choose.Team.InstructionsLabel">Instructions</span></h4>\n                              <p appp-label-key="fcf.assignment.Choose.Team.Instructions">Please select which Team to which you would like add an Activity. Either double-click on the name of the team or type in the name in the Search box.</p>\n                              <p>&nbsp;</p>\n                              <h4><span appp-label-key="fcf.assignment.Choose.Team.Desc" >What Ministry Team is this activity associated with?</span></h4>\n                          </div>\n                          <div class="col-md-12 ">\n                            <\!--Search--\>\n                            <div class="col-md-6 nopadding">\n                              <div class="fcf-team-list-search form-group nopadding">\n                                  <div class="input-group">\n                                    <span class="input-group-addon"><i class="fa fa-search"></i></span>\n                                    <input type="text" class="form-control fcf-team-filter typeahead" placeholder="Search for Team">\n                                  </div> \n                              </div>\n                            </div>\n                            <\!-- /Searh--\>\n                            <div class="col-md-6"></div>              \n                          </div>\n                          \n                            <div class="col-md-12">\n                              <table class="fcf-team-list table" data-toggle="table" data-cache="false" data-height="299" >\n                                <thead>\n                                  <tr>\n                                    <th data-field="MinistryDisplayName" >Ministry Team</th>\n                                    <th data-field="ProjectOwner" >Project/Owner</th>\n                                  </tr>\n                                </thead>\n                                <tbody>\n                                  <\!--  teams.forEach(function(team){   --\>\n                                  <tr obj-embed="team" >\n                                    <td>[[= team.attr(\'MinistryDisplayName\')]]</td>\n                                    <td>[[= team.attr(\'ProjectOwner\')]]</td>\n                                  </tr>\n                                    <\!-- }) --\>\n                                  <tr class=\'mockup\'>\n                                    <td>Thornton</td>\n                                    <td>@fat</td>\n                                  </tr>\n                                  <tr class=\'mockup\'>\n                                    <td>the Bird</td>\n                                    <td>@twitter</td>\n                                  </tr>\n                                </tbody>\n                              </table>\n                            </div>\n                          \n                          \n                        </div>\n                        \n                      </div>\n                      <div id="fcf-activity-actionsbtn" class="col-md-12 align-right">\n                          <button id="fcf-activity-add-chooseteam-next" class="btn custombtn" href="#" role="button" rbac-show="rbac-page2">Next</button>\n                      </div>\n                                 \n                  </div>\n                </div>                \n        <\!--/END PAGE 1--\>\n        <\!--  NOTE:  I needed to keep the Page2 + Model under the same <div> container  --\>\n        <div id="fcf-activity-add-chooseActivity" class="container rbac-display rbac-page2" ');
e.push(a.view.txt(2,"div","style",this,function(){var a=[];a.push('style="');a.push('display:none;"');return a.join("")}));e.push(' >\n        \n        <\!--PAGE 2--\>\n        <div >\n          <div id="wrap" class="col-md-12" resize-adj="-20">\n                <\!--Top--\>\n                <div id="pagination" class="col-md-12">\n                  <div class="row">\n                    <div class="col-md-10"></div>\n                    <div class="col-md-2 align-right marginbot5"><span appp-label-key="fcf.assignment.add.step2">Step 2 of 3</span></div>\n                  </div>\n                </div>\n                <\!--End Top--\>\n              <\!--Content--\>      \n              <div class="col-md-12">\n                <div id="content" class="col-md-12"  resize-adj="-120">\n                    <div class="col-md-12 nopadding">\n                        <h4>\n                          <span appp-label-key="fcf.assignment.Choose.Instructions">Instructions</span>\n                        </h4>\n                        <p> \n                          <span appp-label-key="fcf.assignment.Choose.Activity.Team" >Team:</span> <span class="fcf-activity-add-chooseActivity-teamName" >[[= team.attr("MinistryDisplayName")]]</span>\n                        </p>\n                        <p>\n                          <span appp-label-key="fcf.assignment.Choose.Activity.Desc1" >Choose one of the following activities associated with this team.</span>\n                        </p>\n                        <p>\n                          <span appp-label-key="fcf.assignment.Choose.Activity.Desc2" >If you do not see an activity in the list then click the add activity button.</span>\n                        </p>\n                    </div>\n                    <div class="col-md-12 ">\n                        <\!--Search--\>\n                        <div class="col-md-6 nopadding">\n                            <div class="fcf-activity-list-search form-group nopadding">\n                                <div class="input-group">\n                                  <span class="input-group-addon"><i class="fa fa-search"></i></span>\n                                  <input type="text" class="form-control fcf-activity-filter typeahead" placeholder="Search for Activity">\n                               </div> \n                            </div>\n                        </div>\n                        <\!-- /Searh--\>\n                        <div class="col-md-6"></div>              \n                    </div>\n                             \n                    <div class="col-md-12">\n                      <table class="fcf-activity-list table"  data-cache="false" data-height="299">\n                        <thead>\n                          <tr>\n                            <th data-field="activity_name" appp-label-key="fcf.assignment.Activity" > Activity Name</th>\n                            <th data-field="createdBy" appp-label-key="fcf.assignment.SubmittedBy">Submitted by</th>\n                            <th data-field="approvedBy" appp-label-key="fcf.assignment.ApprovedBy">Approved by</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          <\!--  activities.forEach(function(activity){   --\>\n                          <tr class="template"  addata="" >\n                            <td>\n                              [[= activity.attr("activity_name")]]\n                            </td>\n                            <td>\n                              [[= activity.attr("createdBy")]]\n                            </td>\n                            <td>\n                              [[= activity.attr("approvedBy")]]\n                            </td>\n                          </tr>\n                          <\!-- }) --\>\n                          <tr class=\'mockup\'>\n                            <td>Thornton</td>\n                            <td>@fat</td>\n                            <td>Otto</td>\n                          </tr>\n                          <tr class=\'mockup\' >\n                            <td>the Bird</td>\n                            <td>@twitter</td>\n                            <td>Otto</td>\n                          </tr>\n                        </tbody>\n                      </table>\n                    </div>\n                    <div class="col-md-12">\n                      <a id="fcf-activity-add-chooseAssignment-addAssignment" class="btn custombtn margintop15" href="#" role="button" data-toggle="modal" data-target="#fcf-modal-new-Activity"><span appp-label-key="fcf.activity.Add" >Add Activity</span></a>\n                    </div>\n         \n                  </div>\n                  \n                </div>\n                <div id="fcf-activity-actionsbtn" class="col-md-12 align-right">\n                      <button id="fcf-activity-add-chooseAssignment-previous" class="btn custombtn marginrght15" href="#" role="button" rbac-show="rbac-page1"><span appp-label-key="fcf.assignment.Prev" >Previous</span></button><button id="fcf-activity-add-chooseAssignment-next" class="btn custombtn" href="#" role="button" rbac-show="rbac-page3"><span appp-label-key="fcf.assignment.Next" >Next</span></button>\n                </div>\n                <\!--/Content--\>\n  \n            </div>  \n          </div>   \n        <\!--/END PAGE 2--\>\n                <\!-- Modal for Add Activity --\>\n                    <div class="modal fade" id="fcf-modal-new-Activity" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n                      <div class="modal-dialog">\n                        <div class="modal-content modal-add-activity">\n                          <div class="modal-header">\n                              <p><span appp-label-key="fcf.assignment.addAssignment.Title" >Add a New Activity</span></p>\n                          </div>\n                          <div class="modal-body inner-add-activity">\n                            <form id="fcf-new-activity-form">\n                              <\!----\>\n                              <input type="hidden" id="activity-team" name=\'team\' />\n                              <div class="form-group">\n                                <label for="activity_name"><span appp-label-key="fcf.assignment.Choose.ActivityName">Activity Name</span></label>\n                                <p><span appp-label-key="fcf.assignment.addAssignment.Choose.ActivityNameDesc" >Please use a name everyone associated with the activity will organize</span></p>\n                                <input type="text" class="form-control" placeholder="Activity Name" appp-label-key="fcf.assignment.Choose.ActivityName" name="activity_name" id="activity_name" required >\n                              </div>\n                           \n                              <\!----\>\n                              <div class="form-inline">\n                                  <div class="form-group">\n                                      <label for="date_start" appp-label-key="fcf.assignment.addAssignment.Choose.startDate">Start Date</label>\n                                      <input type="text" class="form-control" id="date_start" name="date_start" />\n                                  </div>\n                                  <div class="form-group">\n                                      <label for="date_end" appp-label-key="fcf.assignment.addAssignment.Choose.endDate">End Date</label>\n                                      <input type="text" class="form-control" id="date_end" name="date_end"/>\n                                  </div>\n                              </div>\n                              <\!----\>\n                              <div class="row margintop10">\n                                <div class="col-md-12 form-group">\n                                    <label><span appp-label-key="fcf.assignment.Choose.TeamObjectives">Team Objectives</span></label>\n                                    <p><span appp-label-key="fcf.assignment.Choose.TeamObjectivesDesc" > Every activity must meet at least one objective. Please choose all that apply:</span></p>\n                                    <div class="form-group objectives-section">\n                                      <\!-- objectives.forEach(function(objective){ --\>\n                                        <div class="checkbox">\n                                            <label><input type="checkbox" value="[[= objective.id ]]" name="objective" /> [[= objective.description ]]</label>\n                                        </div>\n                                        <\!-- }) --\>\n                                        <li class="mockup" >\n                                            <label><input type="checkbox" id="chk2" name="chk2">Objective 2</label>\n                                        </li>\n                                        <li class="mockup">\n                                            <label><input type="checkbox" id="chk3" name="chk2">Objective 3</label>\n                                        </li>\n                                        <li class="mockup">\n                                            <label><input type="checkbox" id="chk3" name="chk3">Objective 4</label>\n                                        </li>                                \n                                    </div>\n                                           \n                                </div>\n                              </div>\n                              <\!----\>\n                              <div class="row margintop10">\n                                  <div class="col-md-12">\n                                      <label><span appp-label-key="fcf.assignment.Choose.Description">Description</span></label>\n                                      <p><span appp-label-key="fcf.assignment.Choose.DescriptionDesc" >Please describe this activity using the team objective as guideline </span></p>\n                                      <textarea type="textarea" class="form-control" placeholder="Description" id="activityDescription" appp-label-key="fcf.assignment.Choose.Description" name="activity_description"',
a.view.pending({scope:this}),">");e.push('</textarea>\n                                  </div>\n                              </div>\n                              <\!----\>\n                              <div class="modal-footer">\n                                  <button id="cancel-add-assignment" type="button" class="btn custombtn" data-dismiss="modal"><span appp-label-key="fcf.assignment.Cancel">Cancel</span></button>\n                                  <button id="add-assignment" type="button" class="btn custombtn"><span appp-label-key="fcf.assignment.Add">Add</span></button>\n                              </div> \n                            </form>      \n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                <\!-- /Modal for Add Activity --\>\n        </div>\n      <\!--PAGE 3--\>\n                <div id=\'fcf-activity-add-report\' class="rbac-display rbac-page3" ');
e.push(a.view.txt(2,"div","style",this,function(){var a=[];a.push('style="');a.push('display:none;"');return a.join("")}));e.push(' resize-adj="-20" >\n                    <div class="container">\n                      <div id="wrap" class="col-md-12">\n                            <\!--Top--\>\n                            <div id="pagination" class="col-md-12">\n                              <div class="row">\n                                <div class="col-md-10"></div>\n                                <div class="col-md-2 align-right marginbot5"><span class="pull-right" appp-label-key="fcf.activity.add.report.step">Step 3 of 3</span></div>\n                              </div>\n                            </div>\n                            <\!--End Top--\>\n                            <\!--Content--\>      \n                              <div id="fcf-activity-content-section" class="col-md-12" resize-adj="-95">\n                                <div class="col-md-12">\n                                  <div class="">\n                                    <\!--All Activity list--\>\n                                    <div class="col-md-4 nopadleft">\n                                      <div class="col-md-12 innner-content padrigt1 fcf-activity-contentsection-activityList" resize-adj="-115" >\n                                        <label class="margintop15 marginbot15 fcf-activity-activityList-label"><span appp-label-key="fcf.activity.report.AllActivities" >All Activities for </span><span class=\'fcf-activity-team-name\'>[TEAM]</span></label>\n                                        <div id="lc-activity" class="fcf-activity-report-activities col-md-12 nopadding" resize-adj="-175">\n                                          <\!-- activities.forEach(function(activity) {  --\>\n                                          \n                                          <div class="imgleft fcf-activity-list-item" obj-embed="activity" >\n                                            \n                                                <div class="col-md-12 col-sm-12 nopadleft">\n                                                  <div class="col-md-5 col-sm-3 col-xs-4 nopadding"><img ');
e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('images/fcf_activities/img1.jpg"');return a.join("")}));e.push(" ");e.push(a.view.txt(2,"img","style",this,function(){var a=[];a.push('style="');a.push('width:120px;"');return a.join("")}));e.push('></div>\n                                                  <div class="col-md-6 col-sm-8 col-xs-7">\n                                                    <p><span class="orange">[[= activity.attr("activity_name") ]]</span><br/><span class="blue fcf-activity-activity-project-name">[[= ProjectName ]]</span></p>\n                                                    <p class="fcf-activity-tag-list" activityID="[[= activity.attr(\'id\') ]]">\n<\!-- \nvar displayedTags = []; \ntaggedPeople.forEach(function(personID){\n    var foundPerson = null;\n    teammates.each(function(mate){\n    \n      if (mate.IDPerson == personID) {\n        foundPerson = mate;\n      }\n    })\n    if (foundPerson) {   \n        if (foundPerson.IDPerson != whoami.IDPerson) {\n            displayedTags.push(foundPerson.display_name); \n        } else {\n            displayedTags.unshift(\' <span class="orange">\'+foundPerson.display_name+\'</span>\');\n        }\n    }\n})\n]] [[== displayedTags.join(\', \') ]]  <\!--\n--\><span class="orange mockup">Tum</span></p>\n                                                  </div>\n                                                  <div class="col-md-1 col-sm-1 col-xs-1 nopadding"><img class="fcf-activity-list-item-tag" activityID="[[= activity.attr(\'id\') ]]" ');
e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('images/fcf_activities/tag.jpg"');return a.join("")}));e.push('></div>\n                                                </div>  \n                                       \n                                          </div>\n                                          \n                                          <\!-- })  --\>\n                                        \n                                        <div class="imgleft mockup">\n                                            <div class="row">\n                                              <div class="col-md-12 col-sm-12 nopadleft">\n                                                <div class="col-md-5 col-sm-3 col-xs-4 nopadding"><img ');
e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('images/fcf_activities/img2.jpg"');return a.join("")}));e.push('></div>\n                                                <div class="col-md-6 col-sm-8 col-xs-7">\n                                                  <p><span class="orange">Archery Outreach</span><br/><span class="blue">Project:Resource</span></p>\n                                                  <p><span class="orange">Tum</span>, Nate, Mike, Imran, Boom, Jume</p>\n                                                </div>\n                                                <div class="col-md-1 col-sm-1 col-xs-1 nopadding"><img ');
e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('images/fcf_activities/tag.jpg"');return a.join("")}));e.push('></div>\n                                              </div>  \n                                            </div>\n                                        </div>\n                                        \n                                        <div class="imgleft mockup">\n                                            <div class="row">\n                                              <div class="col-md-12 col-sm-12 nopadleft">\n                                                <div class="col-md-5 col-sm-3 col-xs-4 nopadding"><img ');
e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('images/fcf_activities/img3.jpg"');return a.join("")}));e.push('></div>\n                                                <div class="col-md-6 col-sm-8 col-xs-7">\n                                                  <p><span class="orange">New Office Move</span><br/><span class="blue">Media Department</span></p>\n                                                  <p><span class="orange">Tum</span>, Nate, Mike, Imran, Boom, Jume</p>\n                                                </div>\n                                                <div class="col-md-1 col-sm-1 col-xs-1 nopadding"><img ');
e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('images/fcf_activities/tag.jpg"');return a.join("")}));e.push('></div>\n                                              </div>  \n                                            </div>\n                                        </div>\n                                        \n                                        <div class="imgleft mockup">\n                                            <div class="row">\n                                              <div class="col-md-12 col-sm-12 nopadleft">\n                                                <div class="col-md-5 col-sm-3 col-xs-4 nopadding"><img ');
e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('images/fcf_activities/img4.jpg"');return a.join("")}));e.push('></div>\n                                                <div class="col-md-6 col-sm-8 col-xs-7">\n                                                  <p><span class="orange">Nate Paid</span><br/><span class="blue">Family Connection</span></p>\n                                                  <p><span class="orange">Tum</span>, Nate, Mike, Imran, Boom, Jume</p>\n                                                </div>\n                                                <div class="col-md-1 col-sm-1 col-xs-1 nopadding"><img ');
e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('images/fcf_activities/tag.jpg"');return a.join("")}));e.push('></div>\n                                              </div>  \n                                            </div>\n                                        </div>\n                                       \n                                        <div class="imgleft mockup">\n                                            <div class="row">\n                                              <div class="col-md-12 col-sm-12 nopadleft">\n                                                <div class="col-md-5 col-sm-3 col-xs-4 nopadding"><img ');
e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('images/fcf_activities/img5.jpg"');return a.join("")}));e.push('></div>\n                                                <div class="col-md-6 col-sm-8 col-xs-7">\n                                                  <p><span class="orange">Fund Raiser</span><br/><span class="blue">Family Connection</span></p>\n                                                  <p><span class="orange">Tum</span>, Nate, Mike, Imran, Boom, Jume</p>\n                                                </div>\n                                                <div class="col-md-1 col-sm-1 col-xs-1 nopadding"></div>\n                                              </div>  \n                                            </div>\n                                        </div>\n                                        \n                                        <div class="imgleft mockup">\n                                            <div class="row">\n                                              <div class="col-md-12 col-sm-12 nopadleft">\n                                                <div class="col-md-5 col-sm-3 col-xs-4 nopadding"><img ');
e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('images/fcf_activities/img5.jpg"');return a.join("")}));e.push('></div>\n                                                <div class="col-md-6 col-sm-8 col-xs-7">\n                                                  <p><span class="orange">Fund Raiser</span><br/><span class="blue">Family Connection</span></p>\n                                                  <p><span class="orange">Tum</span>, Nate, Mike, Imran, Boom, Jume</p>\n                                                </div>\n                                                <div class="col-md-1 col-sm-1 col-xs-1 nopadding"></div>\n                                              </div>  \n                                            </div>\n                                        </div>\n                                                      \n                                        </div>                                                                    \n                                      </div> \n                                    </div>\n                                    <\!--END All Activity list--\>\n                                    <\!--Activity Report--\> \n                                    <div class="col-md-8 innner-content">\n                                      <div class="row margintop15" resize-adj="-145">\n                                        <\!--Uploaded Photos--\>\n                                        <div class="col-md-6">\n                                          <div class="row marginbot15">\n                                            <div class="col-md-12">\n                                              <label>Current Activity Report</label>\n                                              <p><span class="orange fcf-activity-activity-name">[Activity Name]</span>   <span class="blue"><span class="fcf-activity-activity-startdate">10/1/14</span> - <span class="fcf-activity-activity-enddate">Ongoing</span></span></p>\n                                              <p class="blue"><span class="fcf-activity-activity-project-name">[Project Name]</span></br><span class="fcf-activity-activity-team-name">[Team Name]</span></p>\n                                            </div>\n                                          </div>\n<\!-- \n  Asked not to include this:\n                                               <div class="imgleft fcf-activity-image-list-item addImage">\n                                                  <div class="row">\n                                                    <div class="col-md-12">\n                                                      <div class="row">\n                                                        <div class="col-md-4 col-sm-3 col-xs-4 nopadding"><img ');
e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('/images/fcf_activities/icon_picture_activity.jpg"');return a.join("")}));e.push('></div>\n                                                        <div class="col-md-8 col-sm-9 col-xs-8">\n                                                          <label class="blue"><span appp-label-key="fcf.activity.add.report.AddNewImage"> Add New Image </span></label>\n                                                        </div>                            \n                                                      </div>\n                                                    </div>  \n                                                  </div>\n                                              </div>\n--\>\n                                          <div id="uploaded-img" class="col-md-12 padrigt1" resize-adj="-276">\n                                            <label class="margintop15 marginbot15">Uploaded Photos</label>\n                                            <div id="upload-scroll" class="fcf-activity-report-activity-images col-md-12 nopadding" resize-adj="-341">\n                                             \n                                              <\!-- images.forEach(function(image){ --\> \n                                              \n                                              <div class="imgmid fcf-activity-image-list-item" obj-embed="image" >\n                                                  <div class="row">\n                                                    <div class="col-md-12">\n                                                      <div class="row">\n                                                        <div class="col-md-4 col-sm-3 col-xs-4 nopadding"><img ');
e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('images/fcf_activities/img2.jpg"');return a.join("")}));e.push('></div>\n                                                        <div class="col-md-8 col-sm-9 col-xs-8">\n                                                          <label class="blue">"[[= image.attr("caption") ]]"</label>\n                                                          <p class="fcf-activity-image-tag-list" imageID="[[= image.attr(\'id\') ]]"><span class="blue bgfont" appp-label-key="fcf.activity.add.report.PeopleInPhoto" >People in this photo:</span><br>\n<\!-- \nvar displayedTags = []; \ntaggedPeople.forEach(function(personID){\n    var foundPerson = null;\n    teammates.each(function(mate){\n    \n      if (mate.IDPerson == personID) {\n        foundPerson = mate;\n      }\n    })\n    if (foundPerson) {   \n        if (foundPerson.IDPerson != whoami.IDPerson) {\n            displayedTags.push(foundPerson.display_name); \n        } else {\n            displayedTags.unshift(\' <span class="orange">\'+foundPerson.display_name+\'</span>\');\n        }\n    }\n})\n]] [[== displayedTags.join(\', \') ]]  <\!--\n--\> \n                                                          </p>\n                                                        </div>                            \n                                                      </div>\n                                                    </div>  \n                                                  </div>\n                                              </div>\n                                              \n                                              <\!-- })  --\>\n                                              \n                                              <div class="imgmid mockup">\n                                                  <div class="row">\n                                                    <div class="col-md-12">\n                                                      <div class="row">\n                                                        <div class="col-md-4 col-sm-3 col-xs-4 nopadding"><img ');
e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('images/fcf_activities/img3.jpg"');return a.join("")}));e.push('></div>\n                                                        <div class="col-md-8 col-sm-9" col-xs-8>\n                                                          <label class="blue">"Concert at the Hilton"</label>\n                                                          <p><span class="blue bgfont">People in this photo:</span><br>\n                                                          <span class="orange">Tum</span>, Nate, Mike, Imran, Boom, Jume</p>\n                                                        </div>                            \n                                                      </div>\n                                                    </div>  \n                                                  </div>\n                                              </div>\n                                                                    \n                                              \n                                              <div class="imgmid mockup">\n                                                  <div class="row">\n                                                    <div class="col-md-12">\n                                                      <div class="row">\n                                                        <div class="col-md-4 col-sm-3 col-xs-4 nopadding"><img ');
e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('images/fcf_activities/img4.jpg"');return a.join("")}));e.push('></div>\n                                                        <div class="col-md-8 col-sm-9 col-xs-8">\n                                                          <label class="blue">"Dinner with the Group"</label>\n                                                          <p><span class="blue bgfont">People in this photo:</span><br>\n                                                          <span class="orange">Tum</span>, Nate, Mike, Imran, Boom, Jume</p>\n                                                        </div>                            \n                                                      </div>\n                                                    </div>  \n                                                  </div>\n                                              </div>\n                                          \n                                              <div class="imgmid mockup">\n                                                  <div class="row">\n                                                    <div class="col-md-12">\n                                                      <div class="row">\n                                                        <div class="col-md-4 col-sm-3 col-xs-4 nopadding"><img ');
e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('images/fcf_activities/img5.jpg"');return a.join("")}));e.push('></div>\n                                                        <div class="col-md-8 col-sm-9 col-xs-8">\n                                                          <label class="blue">"Listening to Speaker"</label>\n                                                          <p><span class="blue bgfont">People in this photo:</span><br>\n                                                          <span class="orange">Tum</span>, Nate, Mike, Imran, Boom, Jume</p>\n                                                        </div>                            \n                                                      </div>\n                                                    </div>  \n                                                  </div>\n                                              </div>\n                                                                        \n                                            </div>                                                                    \n                                          </div>                 \n                                        </div>\n                                        <\!--/Uploaded Photos--\>\n                                        <\!--Big Image--\>\n                                        <div class="col-md-6">\n                                          <div class="col-md-12 nopadding nomargin">\n                                            <div id="fcf-activity-image-upload" class="dropzone dz-clickable nopadding" >\n                                                <div class="dz-message fcf-activity-icon-picture">\n                                                  <span class="first" appp-label-key="fcf.activity.add.report.DragImageHere">Drag image here</span>\n                                                  <span appp-label-key="fcf.activity.add.report.or">- or -</span>\n                                                  <span class="opsportal-margin-top"><a class="btn opsportal-btn opsportal-btn-dk" title="Click to open the file browser" href="#" appp-label-key="fcf.activity.add.report.ClickToOpenFileBrowser">Click to open the file browser</a></span>\n                                                </div>\n                                                <div class="preview-template" ');
e.push(a.view.txt(2,"div","style",this,function(){var a=[];a.push('style="');a.push('display: none;"');return a.join("")}));e.push("></div>\n                                                <img ");e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('"');return a.join("")}));e.push(' id="fcf-activity-image-uploaded" width="344" />\n                                            </div>\n                                          </div>\n                                          <\!--/END Big Image--\>\n                                          <\!--Form--\>\n                                          <div class="col-md-12 nopadding nomargin ">\n                                            <form class="fcf-activity-image-form">\n                                              <input type="hidden" class="form-control" id="image-image" name="image" />\n                                              <input type="hidden" class="form-control" id="image-activity" name="activity" />\n                                              <div id="dc" class="">\n                                                <div class="form-group col-md-6 nopadding nomargin">\n                                                  <input type="text" class="form-control" id="image-caption"  placeholder=\'caption\' name="caption" appp-label-key="fcf.activity.image.form.caption" />\n                                                </div>\n                                                <div class="form-group col-md-6 nopadding nomargin">\n                                                  <input type="text" class="form-control" id="image-date" name="date" placeholder="date of photo" />\n                                                </div>\n                                              </div>\n                                          </form>\n                                          </div>\n                                          <div class="col-md-12 nopadding">\n                                            <div class="form-group">\n                                              <div type="text" class="" id="image-tags" name="tags" placeholder=\'people in photo\' appp-label-key="fcf.activity.image.form.tags"> </div>\n                                            </div>\n                                          </div>\n<\!--\n<div id="actionsbtn" class="form-inline marginbot15">\n<div class="btnactions">\n  <button id="fcf-activity-image-form-delete" type="button" class="btn custombtn "><span appp-label-key="fcf.assignment.imageform.Delete" >Delete</span></button>\n  <button id="fcf-activity-image-form-cancel" type="submit" class="btn custombtn "><span appp-label-key="fcf.assignment.imageform.Cancel" >Cancel</span></button>\n  <button id="fcf-activity-image-form-save" type="submit" class="btn custombtn " ><span appp-label-key="fcf.assignment.imageform.SaveImage" >Save Image</span></button>\n</div>\n</div>\n--\>\n                                          <\!--Profile List--\>\n                                          <div id="profile-list" class="col-md-12 nopadding">\n                                              <div id="profilelist-scroll" resize-adj="-480">\n                                                <div class="col-md-12">\n                                                  <ul class="fcf-activitiy-people-list">\n                                                  <\!-- people.each(function(person){   --\>\n                                                  <li class="fcf-activity-people-objects" obj-embed="person" data-person-id="[[= person.attr(\'IDPerson\') ]]">\n                                                        <img ');
e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('"');return a.join("")}));e.push(' class="floatleft" width="66" ><strong>[[= person.attr("display_name") ]]</strong><br>Project Director<br>Connie\'s Home\n                                                  </li>\n        \n                                                  <\!-- }) --\>\n                                                    <li class="mockup">\n                                                      <img ');
e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('images/fcf_activities/profile-pic1.jpg"');return a.join("")}));e.push(' class="floatleft" width="66" height="54"><strong>Imran</strong><br>Outreach Coordinator<br>FCF Admin\n                                                    </li>\n                                                    <li class="mockup" >\n                                                      <img ');e.push(a.view.txt(2,"img","src",this,function(){var a=
[];a.push('src="');a.push('images/fcf_activities/profile-pic2.jpg"');return a.join("")}));e.push(' class="floatleft" width="66" height="54"><strong>Lume</strong><br>Book Keeper<br>FCF Admin\n                                                    </li>\n                                                    <li class="mockup" >\n                                                      <img ');e.push(a.view.txt(2,"img","src",this,function(){var a=[];a.push('src="');a.push('images/fcf_activities/profile-pic3.jpg"');
return a.join("")}));e.push(' class="floatleft" width="66" height="54"><strong>Dao</strong><br>Office Manager<br>FCF Admin\n                                                    </li>\n                                                </ul>\n                                                </div>\n                                              </div>\n                                          </div>\n                                          <\!--/Profile List--\>\n                                          <div id="actionsbtn" class="form-inline marginbot15">\n                                            <div class="btnactions">\n                                              <button id="fcf-activity-image-form-delete" type="button" class="btn custombtn "><span appp-label-key="fcf.assignment.imageform.Delete" >Delete</span></button>\n                                              <button id="fcf-activity-image-form-cancel" type="submit" class="btn custombtn "><span appp-label-key="fcf.assignment.imageform.Cancel" >Cancel</span></button>\n                                              <button id="fcf-activity-image-form-save" type="submit" class="btn custombtn " ><span appp-label-key="fcf.assignment.imageform.SaveImage" >Save Image</span></button>\n                                            </div>\n                                          </div>\n                                          <\!--/END Form--\>         \n                                        </div>\n                                        <\!--/Big Image--\>\n                                      </div>\n                                    </div>\n                                    <\!--END Activity Report--\>\n                                  </div>        \n                                </div>\n                              </div>\n                            <\!--/Content--\>\n                            <div id="fcf-activity-actionsbtn" class="form-inline col-md-12">\n                              <div class="btnactions">\n                                <button id="fcf-activity-image-form-nav-previous" type="submit" class="btn custombtn marginrght10">Previous</button>\n                                <button id="fcf-activity-image-form-nav-finish" type="submit" class="btn custombtn marginrght10" >Finish</button>\n                              </div>\n                          </div>           \n                      </div>\n                    </div>\n                </div>\n                <\!--/END PAGE 3--\>\n               \n</div>');
return e.join("")}}))});steal.executed("opstools/FCFActivities/views/FCFActivities/FCFActivities.ejs");
steal("appdev","//OpsPortal/classes/OpsTool.js","opstools/FCFActivities/controllers/Portal.js","opstools/FCFActivities/controllers/AddChooseMinistry.js","opstools/FCFActivities/controllers/AddChooseActivity.js","opstools/FCFActivities/controllers/ActivityReport.js","opstools/FCFActivities/controllers/ConfirmStep.js","//opstools/FCFActivities/views/FCFActivities/FCFActivities.ejs",function(){AD.Control.OpsTool.extend("FCFActivities",{init:function(a,b){var c=this;this.options=b=AD.defaults({templateDOM:"//opstools/FCFActivities/views/FCFActivities/FCFActivities.ejs",
resize_notification:"FCFActivities.resize",tool:null},b);this._super(a,b);this.keyVisiblePortal="Portal";this.resizePortals={};this.dataSource=this.options.dataSource;this.initDOM();this.initPortals();this.initEvents();AD.comm.hub.subscribe("opsportal.tool.show",function(a,b){"FCFActivities"==b.tool&&c.showPortal("Portal")});AD.comm.hub.subscribe("fcf.activity.new",function(){c.newActivity()});AD.comm.hub.subscribe("FCFActivities.resize",function(a,b){c.resizeActivePortal(b.height)});AD.comm.service.get({url:"/fcf_activities/activityreport/whoami"}).fail(function(a){console.error("!!!! FCFActivities: error getting /whoami",
a)}).then(function(a){a?c.portals.Report.setWhoami(a):console.warn("... FCFActivities: /whoami did not find an entry!")})},initDOM:function(){this.element.html(can.view(this.options.templateDOM,{}))},initEvents:function(){var a=this;this.portals.Add1.element.on(this.portals.Add1.CONST.NEXT,function(){var b=a.portals.Add1.value();console.log(" ... Team Selected: "+b.getID());a.portals.Add2.loadData(b);a.showPortal("Add2");a.portals.Report.setTeam(b)});this.portals.Add2.element.on(this.portals.Add2.CONST.NEXT,
function(){var b=a.portals.Add2.value();console.log(" ... Activity Selected: "+b.getID());a.portals.Report.loadData(b);a.showPortal("Report")});this.portals.Add2.element.on(this.portals.Add2.CONST.PREV,function(){a.showPortal("Add1")});this.portals.Report.element.on(this.portals.Report.CONST.FINISH,function(){a.showPortal("Portal")});this.portals.Report.element.on(this.portals.Report.CONST.PREV,function(){a.showPortal("Add2")})},initPortals:function(){this.portals={};this.portals.Portal=new (AD.Control.get("opstools.FCFActivities.Portal"))(this.element.find("#fcf-activity-portal"));
this.resizePortals.Portal=!0;this.portals.Add1=new (AD.Control.get("opstools.FCFActivities.AddChooseMinistry"))(this.element.find("#fcf-activity-add-chooseTeam"));this.resizePortals.Add1=!0;this.portals.Add2=new (AD.Control.get("opstools.FCFActivities.AddChooseActivity"))(this.element.find("#fcf-activity-add-chooseActivity"));this.resizePortals.Add2=!0;this.portals.Report=new (AD.Control.get("opstools.FCFActivities.ActivityReport"))(this.element.find("#fcf-activity-add-report"));this.resizePortals.Report=
!0},newActivity:function(){this.showPortal("Add1")},resizeActivePortal:function(a){var a=a-20,b=this.portals[this.keyVisiblePortal];b.resize&&b.resize(a);for(var c in this.resizePortals)this.resizePortals[c]=c!=b;this.lastResizeValue=a},showPortal:function(a){for(var b in this.portals)b==a?(this.portals[b].show(),this.resizePortals[b]&&(this.portals[b].resize(this.lastResizeValue),this.resizePortals[b]=!1)):this.portals[b].hide();this.keyVisiblePortal=a},".ad-item-add click":function(a,b){b.preventDefault()}})});
steal.executed("opstools/FCFActivities/controllers/FCFActivities.js");steal.executed("/site/labels/opstool-FCFActivities.js");steal("//opstools/FCFActivities/controllers/FCFActivities.js","//opstools/FCFActivities/FCFActivities.css","/site/labels/opstool-FCFActivities.js").then(function(){});steal.executed("opstools/FCFActivities/FCFActivities.js");steal.popPending();
