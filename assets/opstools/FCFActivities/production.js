steal.has("stealconfig.js","opstools/FCFActivities/views/Portal/Portal.ejs","opstools/FCFActivities/controllers/Portal.js","opstools/FCFActivities/models/base/UserTeam.js","opstools/FCFActivities/models/UserTeam.js","opstools/FCFActivities/models/base/TeamActivity.js","opstools/FCFActivities/models/TeamActivity.js","js/typeahead.jquery.min.js","opstools/FCFActivities/controllers/FilteredElements.js","opstools/FCFActivities/controllers/AddChooseMinistry.js","opstools/FCFActivities/models/base/TeamObjective.js",
"opstools/FCFActivities/models/TeamObjective.js","opstools/FCFActivities/controllers/AddChooseActivity.js","opstools/FCFActivities/models/base/ActivityImage.js","opstools/FCFActivities/models/ActivityImage.js","opstools/FCFActivities/controllers/ActivityReport.js","opstools/FCFActivities/views/FCFActivities/FCFActivities.ejs","opstools/FCFActivities/controllers/FCFActivities.js","/site/labels/opstool-FCFActivities.js","opstools/FCFActivities/FCFActivities.js");
steal({id:"OpsPortal/production.js",waits:!0,has:"can/util/can.js can/util/array/each.js can/util/jquery/jquery.js can/util/util.js can/util/bind/bind.js can/util/string/string.js can/construct/construct.js can/observe/observe.js can/util/string/deparam/deparam.js can/route/route.js can/control/control.js can/control/route/route.js can/model/model.js can/view/view.js can/observe/compute/compute.js can/view/elements.js can/view/scanner.js can/view/node_lists.js can/view/live.js can/view/render.js can/view/ejs/ejs.js can/can.js can/construct/super/super.js appdev/ad.js js/OpenAjax.js appdev/comm/hub.js appdev/util/uuid.js js/async.js appdev/util/async.js appdev/util/string.js appdev/config/config.js appdev/config/data.js appdev/sal/web-jquery.js appdev/comm/socket.js appdev/model/model.js appdev/labels/lang.js appdev/labels/label.js appdev/widgets/ad_ui_reauth/ad_ui_reauth.css appdev/widgets/ad_icon_busy/ad_icon_busy.css appdev/widgets/ad_icon_busy/ad_icon_busy.js appdev/widgets/ad_ui_reauth/ad_ui_reauth.js appdev/auth/reauth.js appdev/comm/service.js appdev/UIController.js appdev/control/control.js appdev/appdev.js OpsPortal/classes/OpsTool.js".split(" ")});
steal({id:"opstools/FCFActivities/production.css",waits:!0,has:["styles/dropzone.css","opstools/FCFActivities/FCFActivities.css"]});steal.pushPending();
steal.config({map:{"*":{"jquery/jquery.js":"jquery"}},paths:{jquery:"js/jquery.min.js","jquery-ui.js":"js/jquery-ui.min.js","bootstrap.js":"bootstrap/js/bootstrap.js","bootstrap.css":"bootstrap/css/bootstrap.min.css","wijmo-open.js":"js/jquery.wijmo-open.all.3.20142.45.min.js","wijmo-pro.css":"styles/jquery.wijmo-pro.all.3.20142.45.min.css","wijmo-pro.js":"js/jquery.wijmo-pro.all.3.20142.45.min.js","jquery-wijmo.css":"styles/jquery-wijmo.css","font-awesome.css":"styles/font-awesome.css","GenericList.js":"js/GenericList.js",
"dropzone.js":"js/dropzone.min.js","dropzone.css":"styles/dropzone.css","select3.js":"select3/select3-full.min.js","select3.css":"dselect3/select3.css"},shim:{jquery:{exports:"jQuery",ignore:!0},"js/dependencies/sails.io.js":{packaged:!1,ignore:!0},"site/labels/appdev.js":{packaged:!1,ignore:!0},"jquery-ui.js":{packaged:!1},"bootstrap.js":{packaged:!1},"wijmo-open.js":{packaged:!1},"wijmo-pro.js":{packaged:!1},"jquery-wijmo.css":{packaged:!1},"font-awesome.css":{packaged:!1},"js/jquery.sidr.min.js":{packaged:!1},
"bootstrap/js/bootstrap-datepicker.js":{packaged:!1},"opsportal/requirements.js":{ignore:!0},"site/labels/OpsPortal.js":{packaged:!1,ignore:!0},"site/labels/opstool-Dashboard.js":{packaged:!1,ignore:!0},"js/datatables/media/js/jquery.dataTables.min.js":{packaged:!1},"js/sDashboard/sDashboard.css":{packaged:!1},"js/Flotr2/flotr2.min.js":{packaged:!1},"js/sDashboard/jquery-sDashboard.js":{packaged:!1},"wijmo-pro.css":{packaged:!1},"site/labels/HrisAdminObjects.js":{packaged:!1,ignore:!0},"site/labels/HRISUserProfile.js":{packaged:!1,
ignore:!0},"dropzone.js":{packaged:!1},"dropzone.css":{packaged:!1},"site/labels/opstool-MPDReport.js":{packaged:!1,ignore:!0},"site/labels/opstools/RBAC.js":{packaged:!1,ignore:!0},"site/labels/opstools-GMAMatrix.js":{packaged:!1,ignore:!0},"select3.js":{packaged:!1},"select3.css":{packaged:!1},"site/labels/opstool-FCFActivities.js":{packaged:!1,ignore:!0}},amd:!1});steal.executed("stealconfig.js");
steal("can/view/ejs",function(a){return a.view.preload("opstools_FCFActivities_views_Portal_Portal_ejs",a.EJS(function(a,c){with(c)with(a){var d=[];d.push('<div class="panel panel-default">\n    <div class="panel-heading">\n        <a class="ad-item-add btn btn-default" href="#">Add</a>\n        <a class="ad-item-delete btn btn-default" style="float:right" href="#">Delete</a>\n    </div>\n    <div class="panel-body">\n        <div class="well" >Content for Portal</div>\n    </div>\n</div>');return d.join("")}}))});
steal.executed("opstools/FCFActivities/views/Portal/Portal.ejs");steal("appdev","//opstools/FCFActivities/views/Portal/Portal.ejs",function(){AD.Control.extend("opstools.FCFActivities.Portal",{init:function(a,b){this.options=b=AD.defaults({},b);this._super(a,b);this.dataSource=this.options.dataSource;this.initDOM()},initDOM:function(){},".fcf-activity-new click":function(a,b){AD.comm.hub.publish("fcf.activity.new",{});b.preventDefault()}})});steal.executed("opstools/FCFActivities/controllers/Portal.js");
steal("appdev").then(function(){AD.Model.Base.extend("opstools.FCFActivities.UserTeam",{findAll:"GET /fcf_activities/userteam/find",describe:function(){return{ministry_name:"string",project_owner:"string"}},fieldId:"IDMinistry",fieldLabel:"ministry_name"},{model:function(){return AD.Model.get("opstools.FCFActivities.UserTeam")},getID:function(){return this.attr(this.model().fieldId)||"unknown id field"},getLabel:function(){return this.attr(this.model().fieldLabel)||"unknown label field"}})});steal.executed("opstools/FCFActivities/models/base/UserTeam.js");
steal("appdev","opstools/FCFActivities/models/base/UserTeam.js").then(function(){AD.Model.extend("opstools.FCFActivities.UserTeam",{},{})});steal.executed("opstools/FCFActivities/models/UserTeam.js");
steal("appdev").then(function(){AD.Model.Base.extend("opstools.FCFActivities.TeamActivity",{findAll:"GET /fcfactivities/teamactivities",create:"POST /fcfactivities/teamactivities",describe:function(){return{activity_name:"string",activity_description:"string",date_start:"date",date_end:"string"}},fieldId:"id",fieldLabel:"activity_name"},{model:function(){return AD.Model.get("opstools.FCFActivities.TeamActivity")},getID:function(){return this.attr(this.model().fieldId)||"unknown id field"},getLabel:function(){return this.attr(this.model().fieldLabel)||
"unknown label field"}})});steal.executed("opstools/FCFActivities/models/base/TeamActivity.js");steal("appdev","opstools/FCFActivities/models/base/TeamActivity.js").then(function(){AD.Model.extend("opstools.FCFActivities.TeamActivity",{},{})});steal.executed("opstools/FCFActivities/models/TeamActivity.js");
!function(a){var b,c,d,k,p,f=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==
typeof a},toStr:function(a){return f.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){a.each(b,function(a,b){return c(b,a)})},map:a.map,filter:a.grep,every:function(b,c){var i=!0;return b?(a.each(b,function(a,h){return(i=c.call(null,h,a,b))?void 0:!1}),!!i):i},some:function(b,c){var i=!1;return b?(a.each(b,function(a,h){return(i=c.call(null,h,a,b))?!1:void 0}),!!i):i},mixin:a.extend,getUniqueId:function(){var a=0;return function(){return a++}}(),templatify:function(b){function c(){return""+
b}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var g,h;return function(){var j,e,o=this,d=arguments;return j=function(){g=null;c||(h=a.apply(o,d))},e=c&&!g,clearTimeout(g),g=setTimeout(j,b),e&&(h=a.apply(o,d)),h}},throttle:function(a,b){var c,g,h,j,e,o;return e=0,o=function(){e=new Date;h=null;j=a.apply(c,g)},function(){var d=new Date,f=b-(d-e);return c=this,g=arguments,0>=f?(clearTimeout(h),h=null,e=d,j=a.apply(c,g)):h||(h=setTimeout(o,f)),j}},noop:function(){}}}();
b='<span class="twitter-typeahead"></span>';c='<span class="tt-dropdown-menu"></span>';d='<div class="tt-dataset-%CLASS%"></div>';k='<span class="tt-suggestions"></span>';p='<div class="tt-suggestion"></div>';var n=function(){var a={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},
dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return f.isMsie()&&f.mixin(a.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),f.isMsie()&&7>=f.isMsie()&&f.mixin(a.input,{marginTop:"-1px"}),a}(),t=function(){function b(c){c&&c.el||a.error("EventBus initialized without el");
this.$el=a(c.el)}return f.mixin(b.prototype,{trigger:function(a){var b=[].slice.call(arguments,1);this.$el.trigger("typeahead:"+a,b)}}),b}(),s=function(){function a(b,e,h,d){if(!h)return this;e=e.split(g);h=d?c(h,d):h;for(this._callbacks=this._callbacks||{};d=e.shift();)this._callbacks[d]=this._callbacks[d]||{sync:[],async:[]},this._callbacks[d][b].push(h);return this}function b(a,e,h){return function(){for(var b,g=0,c=a.length;!b&&c>g;g+=1)b=!1===a[g].apply(e,h);return!b}}function c(a,b){return a.bind?
a.bind(b):function(){a.apply(b,[].slice.call(arguments,0))}}var g=/\s+/,h=function(){return window.setImmediate?function(a){setImmediate(function(){a()})}:function(a){setTimeout(function(){a()},0)}}();return{onSync:function(b,e,h){return a.call(this,"sync",b,e,h)},onAsync:function(b,e,h){return a.call(this,"async",b,e,h)},off:function(a){var b;if(!this._callbacks)return this;for(a=a.split(g);b=a.shift();)delete this._callbacks[b];return this},trigger:function(a){var e,c,d,i,f;if(!this._callbacks)return this;
a=a.split(g);for(d=[].slice.call(arguments,1);(e=a.shift())&&(c=this._callbacks[e]);)i=b(c.sync,this,[e].concat(d)),f=b(c.async,this,[e].concat(d)),i()&&h(f);return this}}}(),w=function(a){function b(a,h,c){for(var e,d=[],i=0,v=a.length;v>i;i++)d.push(f.escapeRegExChars(a[i]));return e=c?"\\b("+d.join("|")+")\\b":"("+d.join("|")+")",h?RegExp(e):RegExp(e,"i")}var c={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(g){function h(b){var h,c,j;return(h=
e.exec(b.data))&&(j=a.createElement(g.tagName),g.className&&(j.className=g.className),c=b.splitText(h.index),c.splitText(h[0].length),j.appendChild(c.cloneNode(!0)),b.parentNode.replaceChild(j,c)),!!h}function j(a,b){for(var h,e=0;e<a.childNodes.length;e++)h=a.childNodes[e],3===h.nodeType?e+=b(h)?1:0:j(h,b)}var e,g=f.mixin({},c,g);g.node&&g.pattern&&(g.pattern=f.isArray(g.pattern)?g.pattern:[g.pattern],e=b(g.pattern,g.caseSensitive,g.wordsOnly),j(g.node,h))}}(window.document),u=function(){function b(g){var h,
c,e,o,k=this,g=g||{};g.input||a.error("input is missing");h=f.bind(this._onBlur,this);c=f.bind(this._onFocus,this);e=f.bind(this._onKeydown,this);o=f.bind(this._onInput,this);this.$hint=a(g.hint);this.$input=a(g.input).on("blur.tt",h).on("focus.tt",c).on("keydown.tt",e);0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=f.noop);f.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(a){d[a.which||a.keyCode]||f.defer(f.bind(k._onInput,k,a))}):
this.$input.on("input.tt",o);this.query=this.$input.val();this.$overflowHelper=a('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:this.$input.css("font-family"),fontSize:this.$input.css("font-size"),fontStyle:this.$input.css("font-style"),fontVariant:this.$input.css("font-variant"),fontWeight:this.$input.css("font-weight"),wordSpacing:this.$input.css("word-spacing"),letterSpacing:this.$input.css("letter-spacing"),textIndent:this.$input.css("text-indent"),
textRendering:this.$input.css("text-rendering"),textTransform:this.$input.css("text-transform")}).insertAfter(this.$input)}function c(a){return a.altKey||a.ctrlKey||a.metaKey||a.shiftKey}var d;return d={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},b.normalizeQuery=function(a){return(a||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},f.mixin(b.prototype,s,{_onBlur:function(){this.resetInputValue();this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(a){var b=
d[a.which||a.keyCode];this._managePreventDefault(b,a);b&&this._shouldTrigger(b,a)&&this.trigger(b+"Keyed",a)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(a,b){var d,e;switch(a){case "tab":d=this.getHint();e=this.getInputValue();d=d&&d!==e&&!c(b);break;case "up":case "down":d=!c(b);break;default:d=!1}d&&b.preventDefault()},_shouldTrigger:function(a,b){var d;switch(a){case "tab":d=!c(b);break;default:d=!0}return d},_checkInputValue:function(){var a,h,c;a=this.getInputValue();
c=(h=b.normalizeQuery(a)===b.normalizeQuery(this.query))?this.query.length!==a.length:!1;this.query=a;h?c&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(a){this.query=a},getInputValue:function(){return this.$input.val()},setInputValue:function(a,b){this.$input.val(a);b?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,
!0)},getHint:function(){return this.$hint.val()},setHint:function(a){this.$hint.val(a)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var a,b;a=this.getInputValue();b=this.getHint();b=a!==b&&0===b.indexOf(a);!(""!==a&&b&&!this.hasOverflow())&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var a=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=
a},isCursorAtEnd:function(){var a,b,c;return a=this.$input.val().length,b=this.$input[0].selectionStart,f.isNumber(b)?b===a:document.selection?(c=document.selection.createRange(),c.moveStart("character",-a),a===c.text.length):!0},destroy:function(){this.$hint.off(".tt");this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null}}),b}(),r=function(){function b(e){e=e||{};e.templates=e.templates||{};e.source||a.error("missing source");e.name&&!/^[_a-zA-Z0-9-]+$/.test(e.name)&&a.error("invalid dataset name: "+
e.name);this.query=null;this.highlight=!!e.highlight;this.name=e.name||f.getUniqueId();this.source=e.source;this.displayFn=c(e.display||e.displayKey);this.templates=i(e.templates,this.displayFn);this.$el=a(d.replace("%CLASS%",this.name))}function c(a){function b(c){return c[a]}return a=a||"value",f.isFunction(a)?a:b}function i(a,b){function c(a){return"<p>"+b(a)+"</p>"}return{empty:a.empty&&f.templatify(a.empty),header:a.header&&f.templatify(a.header),footer:a.footer&&f.templatify(a.footer),suggestion:a.suggestion||
c}}var g="ttDataset",h="ttValue",j="ttDatum";return b.extractDatasetName=function(b){return a(b).data(g)},b.extractValue=function(b){return a(b).data(h)},b.extractDatum=function(b){return a(b).data(j)},f.mixin(b.prototype,s,{_render:function(b,c){function d(){var i,m;return i=a(k).css(n.suggestions),m=f.map(c,function(b){var c;return c=a(p).append(l.templates.suggestion(b)).data(g,l.name).data(h,l.displayFn(b)).data(j,b),c.children().each(function(){a(this).css(n.suggestionChild)}),c}),i.append.apply(i,
m),l.highlight&&w({className:"tt-highlight",node:i[0],pattern:b}),i}function i(){return l.templates.header({query:b,isEmpty:!q})}function m(){return l.templates.footer({query:b,isEmpty:!q})}if(this.$el){var q,l=this;this.$el.empty();q=c&&c.length;!q&&this.templates.empty?this.$el.html(l.templates.empty({query:b,isEmpty:!0})).prepend(l.templates.header?i():null).append(l.templates.footer?m():null):q&&this.$el.html(d()).prepend(l.templates.header?i():null).append(l.templates.footer?m():null);this.trigger("rendered")}},
getRoot:function(){return this.$el},update:function(a){var b=this;this.query=a;this.canceled=!1;this.source(a,function(c){b.canceled||a!==b.query||b._render(a,c)})},cancel:function(){this.canceled=!0},clear:function(){this.cancel();this.$el.empty();this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),b}(),x=function(){function b(d){var g,h,j,e=this,d=d||{};d.menu||a.error("menu is required");this.isOpen=!1;this.isEmpty=!0;this.datasets=f.map(d.datasets,
c);g=f.bind(this._onSuggestionClick,this);h=f.bind(this._onSuggestionMouseEnter,this);j=f.bind(this._onSuggestionMouseLeave,this);this.$menu=a(d.menu).on("click.tt",".tt-suggestion",g).on("mouseenter.tt",".tt-suggestion",h).on("mouseleave.tt",".tt-suggestion",j);f.each(this.datasets,function(a){e.$menu.append(a.getRoot());a.onSync("rendered",e._onRendered,e)})}function c(a){return new r(a)}return f.mixin(b.prototype,s,{_onSuggestionClick:function(b){this.trigger("suggestionClicked",a(b.currentTarget))},
_onSuggestionMouseEnter:function(b){this._removeCursor();this._setCursor(a(b.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){(this.isEmpty=f.every(this.datasets,function(a){return a.isEmpty()}))?this._hide():this.isOpen&&this._show();this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},
_setCursor:function(a,b){a.first().addClass("tt-cursor");!b&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(a){var b,c,d;if(this.isOpen){if(c=this._getCursor(),b=this._getSuggestions(),this._removeCursor(),d=b.index(c)+a,d=(d+1)%(b.length+1)-1,-1===d)return void this.trigger("cursorRemoved");-1>d&&(d=b.length-1);this._setCursor(a=b.eq(d));this._ensureVisible(a)}},_ensureVisible:function(a){var b,c,d;b=a.position().top;a=b+a.outerHeight(!0);
c=this.$menu.scrollTop();d=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10);0>b?this.$menu.scrollTop(c+b):a>d&&this.$menu.scrollTop(c+(a-d))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(a){this.$menu.css("ltr"===a?n.ltr:n.rtl)},moveCursorUp:function(){this._moveCursor(-1)},
moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(a){return a.length&&(r.extractDatum(a),r.extractValue(a),r.extractDatasetName(a)),null},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(a){f.each(this.datasets,function(b){b.update(a)})},empty:function(){f.each(this.datasets,function(a){a.clear()});this.isEmpty=
!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){this.$menu.off(".tt");this.$menu=null;f.each(this.datasets,function(a){a.destroy()})}}),b}(),y=function(){function d(b){var c,e,g,b=b||{};b.input||a.error("missing input");this.isActivated=!1;this.autoselect=!!b.autoselect;this.minLength=f.isNumber(b.minLength)?b.minLength:1;this.$node=k(b.input,b.withHint);c=this.$node.find(".tt-dropdown-menu");e=this.$node.find(".tt-input");g=this.$node.find(".tt-hint");e.on("blur.tt",
function(a){var b,d;b=document.activeElement;d=c.is(b);b=0<c.has(b).length;f.isMsie()&&(d||b)&&(a.preventDefault(),a.stopImmediatePropagation(),f.defer(function(){e.focus()}))});c.on("mousedown.tt",function(a){a.preventDefault()});this.eventBus=b.eventBus||new t({el:e});this.dropdown=(new x({menu:c,datasets:b.datasets})).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,
this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this);this.input=(new u({input:e,hint:g})).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,
this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this);this._setLanguageDirection()}function k(d,f){var e,i,p,m;e=a(d);i=a(b).css(n.wrapper);p=a(c).css(n.dropdown);m=e.clone().css(n.hint).css({backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),
backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")});m.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1});e.data(g,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")});e.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(f?n.input:n.inputWithNoHint);try{!e.attr("dir")&&e.attr("dir","auto")}catch(q){}return e.wrap(i).parent().prepend(f?
m:null).append(p)}function i(a){var b=a.find(".tt-input");f.each(b.data(g),function(a,c){f.isUndefined(a)?b.removeAttr(c):b.attr(c,a)});b.detach().removeData(g).removeClass("tt-input").insertAfter(a);a.remove()}var g="ttAttrs";return f.mixin(d.prototype,{_onSuggestionClicked:function(a,b){var c;(c=this.dropdown.getDatumForSuggestion(b))&&this._select(c)},_onCursorMoved:function(){var a=this.dropdown.getDatumForCursor();this.input.setInputValue(a.value,!0);this.eventBus.trigger("cursorchanged",a.raw,
a.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue();this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint();this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint();this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0;this.dropdown.open()},_onBlurred:function(){this.isActivated=!1;this.dropdown.empty();this.dropdown.close()},_onEnterKeyed:function(a,b){var c,d;c=this.dropdown.getDatumForCursor();
d=this.dropdown.getDatumForTopSuggestion();c?(this._select(c),b.preventDefault()):this.autoselect&&d&&(this._select(d),b.preventDefault())},_onTabKeyed:function(a,b){var c;(c=this.dropdown.getDatumForCursor())?(this._select(c),b.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close();this.input.resetInputValue()},_onUpKeyed:function(){var a=this.input.getQuery();this.dropdown.isEmpty&&a.length>=this.minLength?this.dropdown.update(a):this.dropdown.moveCursorUp();this.dropdown.open()},
_onDownKeyed:function(){var a=this.input.getQuery();this.dropdown.isEmpty&&a.length>=this.minLength?this.dropdown.update(a):this.dropdown.moveCursorDown();this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(a,b){this.input.clearHintIfInvalid();b.length>=this.minLength?this.dropdown.update(b):this.dropdown.empty();this.dropdown.open();this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint();
this.dropdown.open()},_setLanguageDirection:function(){var a;this.dir!==(a=this.input.getLanguageDirection())&&(this.dir=a,this.$node.css("direction",a),this.dropdown.setLanguageDirection(a))},_updateHint:function(){var a,b,c,d,g,i;(a=this.dropdown.getDatumForTopSuggestion())&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(b=this.input.getInputValue(),c=u.normalizeQuery(b),d=f.escapeRegExChars(c),g=RegExp("^(?:"+d+")(.+$)","i"),i=g.exec(a.value),i?this.input.setHint(b+i[1]):this.input.clearHint()):
this.input.clearHint()},_autocomplete:function(a){var b,c,d;b=this.input.getHint();c=this.input.getQuery();a=a||this.input.isCursorAtEnd();b&&c!==b&&a&&(d=this.dropdown.getDatumForTopSuggestion(),d&&this.input.setInputValue(d.value),this.eventBus.trigger("autocompleted",d.raw,d.datasetName))},_select:function(a){this.input.setQuery(a.value);this.input.setInputValue(a.value,!0);this._setLanguageDirection();this.eventBus.trigger("selected",a.raw,a.datasetName);this.dropdown.close();f.defer(f.bind(this.dropdown.empty,
this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(a){a=f.toStr(a);this.isActivated?this.input.setInputValue(a):(this.input.setQuery(a),this.input.setInputValue(a,!0));this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy();this.dropdown.destroy();i(this.$node);this.$node=null}}),d}();!function(){var b,c,d;b=a.fn.typeahead;c="ttTypeahead";d={initialize:function(b,d){return d=f.isArray(d)?
d:[].slice.call(arguments,1),b=b||{},this.each(function(){var k,e=a(this);f.each(d,function(a){a.highlight=!!b.highlight});k=new y({input:e,eventBus:new t({el:e}),withHint:f.isUndefined(b.hint)?!0:!!b.hint,minLength:b.minLength,autoselect:b.autoselect,datasets:d});e.data(c,k)})},open:function(){return this.each(function(){var b;(b=a(this).data(c))&&b.open()})},close:function(){return this.each(function(){var b;(b=a(this).data(c))&&b.close()})},val:function(b){function d(){var e;(e=a(this).data(c))&&
e.setVal(b)}function f(a){var b,d;return(b=a.data(c))&&(d=b.getVal()),d}return arguments.length?this.each(d):f(this.first())},destroy:function(){return this.each(function(){var b,d=a(this);(b=d.data(c))&&(b.destroy(),d.removeData(c))})}};a.fn.typeahead=function(b){var f;return d[b]&&"initialize"!==b?(f=this.filter(function(){return!!a(this).data(c)}),d[b].apply(f,[].slice.call(arguments,1))):d.initialize.apply(this,arguments)};a.fn.typeahead.noConflict=function(){return a.fn.typeahead=b,this}}()}(window.jQuery);
steal.executed("js/typeahead.jquery.min.js");
steal("appdev","js/typeahead.jquery.min.js",function(){AD.Control.extend("opstools.FCFActivities.FilteredElements",{init:function(a,b){this.options=b=AD.defaults({tagFilter:".fe-filter",tagEl:".fe-el",elCursorOn:function(){},elSelected:function(){},elToTerm:function(a){return a.innerHtml()}},b);this.searchTerms=[];this.elHash={};this.attachDOM();this.refresh()},attachDOM:function(){var a=this;this.teamFilter=this.element.find(this.options.tagFilter).typeahead({hint:!0,highlight:!0,minLength:1},{name:"teams",
displayKey:"value",source:function(b,c){a.filter(b,c)}});this.teamFilter.on("typeahead:closed",function(){console.log("typeahead:closed")});this.teamFilter.on("typeahead:cursorchanged",function(){console.log("typeahead:cursorchanged");var b=a.teamFilter.typeahead("val");(b=a.elHash[b])&&a.options.elCursorOn(b)});this.teamFilter.on("typeahead:selected",function(){console.log("typeahead:selected");var b=a.teamFilter.typeahead("val");(b=a.elHash[b])&&a.options.elSelected(b)});this.teamFilter.on("typeahead:autocompleted",
function(){console.log("typeahead:autocompleted");var b=a.teamFilter.typeahead("val");if(b=a.elHash[b])a.teamFilter.typeahead("close"),a.options.elSelected(b)})},filter:function(a,b){var c,d;c=[];d=RegExp(AD.util.string.quoteRegExp(a),"i");$.each(this.searchTerms,function(a,b){d.test(b)&&c.push({value:b})});b(c);this.filterElements(c)},filterElements:function(a){var b=this,c=[];a.forEach(function(a){(a=b.elHash[a.value])&&c.push(a)});for(var d in b.elHash)a=b.elHash[d],-1!=c.indexOf(a)?a.show():a.hide()},
refresh:function(){var a=this;this.searchTerms=[];this.elHash={};this.element.find(this.options.tagEl).each(function(b,c){var d=$(c),k=a.options.elToTerm(d);a.searchTerms.push(k);a.elHash[k]=d})},selectedEl:function(){return this.elHash[this.teamFilter.typeahead("val")]}})});steal.executed("opstools/FCFActivities/controllers/FilteredElements.js");
steal("appdev","opstools/FCFActivities/models/UserTeam.js","opstools/FCFActivities/models/TeamActivity.js","opstools/FCFActivities/controllers/FilteredElements.js",function(){AD.Control.extend("opstools.FCFActivities.AddChooseMinistry",{CONST:{NEXT:"team.selected"},init:function(a,b){this.options=b=AD.defaults({},b);this._super(a,b);this.element.hide();this.initDOM();this.loadData()},initDOM:function(){var a=this,b=this.domToString(this.element.find(".template")).replace("template",""),b=AD.util.string.replaceAll(b,
"[[=","<%= "),b=AD.util.string.replaceAll(b,"]]","%>"),b=b.replace('addata=""','<%= (el) -> can.data(el, "team", team) %>  data-team-id="<%= team.attr(\'IDMinistry\') %>"');this.element.find(".fcf-team-list tbody:last tr").remove();b=["<% teams.each(function(team) { %>",b,"<% }) %>"].join("\n");can.view.ejs("FCFActivities_AddChooseMinistry",b);this.tableMinistryTeams=this.element.find(".fcf-team-list");this.buttons={};this.buttons.next=this.element.find("#fcf-activity-add-chooseteam-next");this.buttons.next.attr("disabled",
"disabled");this.buttons.next.addClass("disabled");this.Filter=new (AD.Control.get("opstools.FCFActivities.FilteredElements"))(this.element,{tagFilter:".fcf-team-filter",tagEl:".fcf-team-list tr",classSelected:"el-selected",elSelected:function(b){b&&(a.selectRow(b),a.buttons.next.click())},elToTerm:function(a){if(a=a.data("team"))return a.MinistryDisplayName+", "+a.ProjectOwner;console.error(" Ministry Team Row not setup properly.");return""}})},loadData:function(){var a=this,b=AD.Model.get("opstools.FCFActivities.UserTeam");
this.listTeams=null;this.searchTerms=[];this.searchHash={};b.findAll().fail(function(a){console.log(a)}).then(function(b){a.listTeams=b;a.element.find(".fcf-team-list > tbody:last").append(can.view("FCFActivities_AddChooseMinistry",{teams:b}));a.Filter.refresh()})},selectRow:function(a){this.tableMinistryTeams.find(".selected").removeClass("selected");a?(a.addClass("selected"),this.buttons.next.removeAttr("disabled"),this.buttons.next.removeClass("disabled")):(this.buttons.next.attr("disabled","disabled"),
this.buttons.next.addClass("disabled"))},value:function(){var a=this.tableMinistryTeams.find(".selected").data("team");return a?a:null},".fcf-team-list tbody tr click":function(a,b){this.selectRow(a);b.preventDefault()},"#fcf-activity-add-chooseteam-next click":function(){this.element.trigger(this.CONST.NEXT)}})});steal.executed("opstools/FCFActivities/controllers/AddChooseMinistry.js");
steal("appdev").then(function(){AD.Model.Base.extend("opstools.FCFActivities.TeamObjective",{findAll:"GET /fcf_activities/teamobjectives",describe:function(){return{description:"string"}},fieldId:"id",fieldLabel:"description"},{model:function(){return AD.Model.get("opstools.FCFActivities.TeamObjective")},getID:function(){return this.attr(this.model().fieldId)||"unknown id field"},getLabel:function(){return this.attr(this.model().fieldLabel)||"unknown label field"}})});steal.executed("opstools/FCFActivities/models/base/TeamObjective.js");
steal("appdev","opstools/FCFActivities/models/base/TeamObjective.js").then(function(){AD.Model.extend("opstools.FCFActivities.TeamObjective",{},{})});steal.executed("opstools/FCFActivities/models/TeamObjective.js");
steal("appdev","opstools/FCFActivities/models/TeamActivity.js","opstools/FCFActivities/models/TeamObjective.js","opstools/FCFActivities/controllers/FilteredElements.js",function(){AD.Control.extend("opstools.FCFActivities.AddChooseActivity",{CONST:{NEXT:"activity.selected",PREV:"activity.previous"},init:function(a,b){var c=this;this.options=b=AD.defaults({},b);this._super(a,b);this.selectedTeam=null;this.element.hide();this.initDOM();AD.comm.socket.subscribe("fcf_activity_new_external",function(a,
b){if(c.selectedTeam&&c.selectedTeam.getID()==b.team){var p=new (AD.Model.get("opstools.FCFActivities.TeamActivity"))(b.activity);c.listActivities.push(p)}})},initDOM:function(){var a=this,b=this.domToString(this.element.find(".template")).replace("template",""),b=AD.util.string.replaceAll(b,"[[=","<%= "),b=AD.util.string.replaceAll(b,"]]","%>"),b=b.replace('addata=""','<%= (el) -> can.data(el, "activity", activity) %>  data-activity-id="<%= activity.attr(\'id\') %>"');this.element.find(".fcf-activity-list tbody:last tr").remove();
b=["<% activities.each(function(activity) { %>",b,"<% }) %>"].join("\n");can.view.ejs("FCFActivities_AddChooseActivity",b);b=this.domToString(this.element.find(".template-objectives")).replace("template-objectives","");b=AD.util.string.replaceAll(b,"[[=","<%= ");b=AD.util.string.replaceAll(b,"]]","%>");this.element.find("#fcf-modal-new-Activity .checkbox").remove();b=["<% objectives.each(function(objective) { %>",b,"<% }) %>"].join("\n");can.view.ejs("FCFActivities_AddObjectives",b);this.titleMinistry=
this.element.find(".fcf-activity-add-chooseActivity-teamName");this.tableTeamActivities=this.element.find(".fcf-activity-list");this.buttons={};this.buttons.next=this.element.find("#fcf-activity-add-chooseAssignment-next");this.buttons.next.attr("disabled","disabled");this.buttons.next.addClass("disabled");this.Filter=new (AD.Control.get("opstools.FCFActivities.FilteredElements"))(this.element,{tagFilter:".fcf-activity-filter",tagEl:".fcf-activity-list tbody:last tr",classSelected:"el-selected",elSelected:function(b){b&&
(a.selectRow(b),a.buttons.next.click())},elToTerm:function(a){if(a=a.data("activity"))return a.activityName+", "+a.createdBy;console.error(" Ministry Activity Row not setup properly.");return""}});this.modalAdd=this.element.find("#fcf-modal-new-Activity");b={format:"mm/dd/yyyy",startDate:"01/01/1970"};this.modalAdd.find("#dateStart").datepicker(b);this.modalAdd.find("#dateEnd").datepicker(b)},loadData:function(a){var b=this;this.selectedTeam=a;this.titleMinistry.text(a.attr("MinistryDisplayName"));
var c=AD.Model.get("opstools.FCFActivities.TeamActivity");this.listActivities=null;c.findAll({team:a.getID()}).fail(function(a){console.log(a)}).then(function(a){b.listActivities=a;b.element.find(".fcf-activity-list > tbody:last tr").remove();b.element.find(".fcf-activity-list > tbody:last").append(can.view("FCFActivities_AddChooseActivity",{activities:a}));b.Filter.refresh()});AD.Model.get("opstools.FCFActivities.TeamObjective").findAll({team:a.getID()}).fail(function(a){console.log(a)}).then(function(a){b.modalAdd.find(".objectives-section .checkbox").remove();
b.modalAdd.find(".objectives-section").append(can.view("FCFActivities_AddObjectives",{objectives:a}))})},selectRow:function(a){this.tableTeamActivities.find(".selected").removeClass("selected");a?(a.addClass("selected"),this.buttons.next.removeAttr("disabled"),this.buttons.next.removeClass("disabled")):(this.buttons.next.attr("disabled","disabled"),this.buttons.next.addClass("disabled"))},value:function(){var a=this.tableTeamActivities.find(".selected").data("activity");return a?a:null},".fcf-activity-list tbody tr click":function(a,
b){this.selectRow(a);b.preventDefault()},"#fcf-activity-add-chooseAssignment-next click":function(){this.element.trigger(this.CONST.NEXT)},"#fcf-activity-add-chooseAssignment-previous click":function(){this.element.trigger(this.CONST.PREV)},'[name="name"] input':function(a){""==a.val()?a.parent().removeClass("has-success").addClass("has-error"):a.parent().removeClass("has-error").addClass("has-success")},'[name="description"] input':function(a){""==a.val()?a.parent().removeClass("has-success").addClass("has-error"):
a.parent().removeClass("has-error").addClass("has-success")},"#add-assignment click":function(){var a=this,b={objective:[]};this.modalAdd.find(":input").serializeArray().forEach(function(a){"objective"!=a.name?b[a.name]=a.value:b.objective.push(a.value)});b.team=this.selectedTeam.getID();var c=AD.Model.get("opstools.FCFActivities.TeamActivity");c.create(b).fail(function(a){console.error(a)}).then(function(b){b=b.data||b;console.log("returned Activity:",b);b=new c(b);a.listActivities.push(b);a.modalAdd.find(":input:not(:checkbox)").val("");
a.modalAdd.find(":checkbox").prop("checked",!1);a.modalAdd.modal("hide")})}})});steal.executed("opstools/FCFActivities/controllers/AddChooseActivity.js");
steal("appdev").then(function(){AD.Model.Base.extend("opstools.FCFActivities.ActivityImage",{findAll:"GET /fcf_activities/activityimage",findOne:"GET /fcf_activities/activityimage/{id}",create:"POST /fcf_activities/activityimage/create",update:"PUT /fcf_activities/activityimage/update/{id}",destroy:"DELETE /fcf_activities/activityimage/destroy/{id}.json",describe:function(){return{image:"string",caption:"string",date:"date",uploadedBy:"string",tags:"string"}},fieldId:"id",fieldLabel:"caption"},{model:function(){return AD.Model.get("opstools.FCFActivities.ActivityImage")},
getID:function(){return this.attr(this.model().fieldId)||"unknown id field"},getLabel:function(){return this.attr(this.model().fieldLabel)||"unknown label field"}})});steal.executed("opstools/FCFActivities/models/base/ActivityImage.js");steal("appdev","opstools/FCFActivities/models/base/ActivityImage.js").then(function(){AD.Model.extend("opstools.FCFActivities.ActivityImage",{},{})});steal.executed("opstools/FCFActivities/models/ActivityImage.js");
steal("appdev","opstools/FCFActivities/controllers/FilteredElements.js","opstools/FCFActivities/models/ActivityImage.js","dropzone.js","dropzone.css","select3.js","select3.css",function(){AD.Control.extend("opstools.FCFActivities.ActivityReport",{CONST:{NEXT:"activity_report.confirm",PREV:"activity_report.previous",tags:{".fcf-activity-team-name":"title string",".fcf-activity-report-activities":"container for Activities",".fcf-activity-report-activities":"",".fcf-activity-activity-name":"activity name container",
".fcf-activity-activity-project-name":"activity -> project name",".fcf-activity-activity-team-name":"activity -> team name",".fcf-activity-report-activity-images":"image list","#fcf-activity-image-upload":"dropzone element/object ",".fcf-activity-image-form":"the image form","#image-image":"form element: image reference","#image-caption":"form input: image caption","#image-date":"form input: date ","#image-tags":"form input: tags of people",".fcf-activities-people-objects":"form input: objects of people"}},
init:function(a,b){this.options=b=AD.defaults({},b);this._super(a,b);this.listImages=this.listActivities=this.selectedActivity=this.selectedTeam=null;this.listTeammates=[];this.dom={};this.obj={};this.element.hide();this.initDOM()},addActivity:function(){},clearImageList:function(){this.element.find(".fcf-activity-report-activity-images a.list-group-item:not(.addImage)").remove()},clearForm:function(){this.dom.dropzone.find(".dz-message").show();this.dom.dropzone.find("img").prop("src","").hide();
this.dom.inputImage.val("");this.dom.inputCaption.val("");this.dom.inputDate.val("");this.dom.inputTags.select3("value",[]);this.dom.peopleObjects.find("div.fcf-activity-people-objects").show()},loadForm:function(a){var b=this;console.log("... loading Form with image:",a.getID());this.dom.dropzone.find(".dz-message").hide();this.dom.dropzone.find("img").prop("src",a.image).show();this.dom.inputImage.val(a.image);this.dom.inputCaption.val(a.caption);this.dom.inputDate.val(a.date);this.dom.inputTags.select3("value",
[]);this.dom.peopleObjects.find("div.fcf-activity-people-objects").show();a.taggedPeople.forEach(function(a){b.dom.peopleObjects.find('[data-person-id="'+a+'"]').click()});this.dom.inputActivity.val(this.selectedActivity.getID())},formSubmit:function(){var a={};this.dom.imageForm.serializeArray().forEach(function(b){a[b.name]=b.value});a.taggedPeople=[];var b=this.dom.inputTags.select3("data");console.log("listTags:",b);b.forEach(function(b){a.taggedPeople.push(b.id)});this.formValidate(a)?(AD.Model.get("opstools.FCFActivities.ActivityImage").create(a).fail(function(a){console.error(a)}).then(function(){self.clearForm()}),
console.log("values:",a)):console.log("... can't save the image yet.")},formValidate:function(){return!0},initDOM:function(){var a=this,b=this.domToString(this.element.find(".fcf-activity-report-activities  .template")).replace("template",""),b=AD.util.string.replaceAll(b,"[[=","<%= "),b=AD.util.string.replaceAll(b,"]]","%>"),b=b.replace("activity-id",'<%= (el) -> can.data(el, "activity", activity) %>  activity-id'),b=b.replace('src=""',"src=\"<%= activity.attr('imageURL') %>\"");this.element.find(".fcf-activity-report-activities a.list-group-item").remove();
b=["<% activities.each(function(activity) { %>",b,"<% }) %>"].join("\n");console.warn(b);can.view.ejs("FCFActivities_ActivityReport_ActivityList",b);b=this.domToString(this.element.find(".fcf-activity-report-activity-images  .template")).replace("template","");b=AD.util.string.replaceAll(b,"<\!--","<%");b=AD.util.string.replaceAll(b,"--\>","%>");b=AD.util.string.replaceAll(b,"[[=","<%= ");b=AD.util.string.replaceAll(b,"]]","%>");b=b.replace("image-id",'<%= (el) -> can.data(el, "image", image) %>  image-id');
b=b.replace('src=""',"src=\"<%= image.attr('image') %>\"");this.clearImageList();b=["<% images.each(function(image) { %>",b,"<% }) %>"].join("\n");can.view.ejs("FCFActivities_ActivityReport_ImageList",b);b=this.domToTemplate(this.element.find(".fcf-activitiy-people-objects"));can.view.ejs("FCFActivities_ActivityReport_PersonList",b);this.dom.titleTeam=this.element.find(".fcf-activity-team-name");this.dom.listActivities=this.element.find(".fcf-activity-report-activities");this.dom.listActivities.css("height",
"600px");this.dom.titleActivity=this.element.find(".fcf-activity-activity-name");this.dom.titleActivityProject=this.element.find(".fcf-activity-activity-project-name");this.dom.titleActivityTeam=this.element.find(".fcf-activity-activity-team-name");this.dom.listImages=this.element.find(".fcf-activity-report-activity-images");this.dom.listImages.css("height","400px");this.dom.dropzone=this.element.find("#fcf-activity-image-upload");this.obj.dropzone=new Dropzone("#fcf-activity-image-upload",{url:"/fcf_activities/activityimageupload",
paramName:"imageFile",maxFilesize:100,uploadMultiple:!1,acceptedFiles:".jpg, .jpeg, .psd, .gif, .png"});this.obj.dropzone.on("success",function(b,c){console.log("response:",c);a.obj.dropzone.removeFile(b);a.dom.dropzone.find(".dz-message").hide();a.dom.dropzone.find("img").prop("src",c.data.path).show();a.dom.inputImage.val(c.data.name)});this.dom.dropzone.find("img").prop("src","").hide();this.dom.imageForm=this.element.find(".fcf-activity-image-form");this.dom.inputImage=this.dom.imageForm.find("#image-image");
this.dom.inputActivity=this.dom.imageForm.find("#image-activity");this.dom.inputCaption=this.dom.imageForm.find("#image-caption");this.dom.inputDate=this.dom.imageForm.find("#image-date");this.dom.inputTags=this.dom.imageForm.find("#image-tags");this.dom.peopleObjects=this.dom.imageForm.find(".fcf-activitiy-people-objects");this.dom.peopleObjects.css("height","200px");this.dom.inputDate.datepicker({format:"mm/dd/yyyy",startDate:"01/01/1970"});var b=this.dom.inputTags.prop("app-label-key")||"fcf.activity.image.form.tags",
c=AD.lang.label.getLabel(b);c||(console.warn("labelKey:"+b+" :: no label returned."),c="*people in photo");this.dom.inputTags.select3({items:[{id:0,text:"no items loaded"}],multiple:!0,placeholder:c});this.dom.inputTags.on("change",function(b){a.personSelected(b)});this.dom.peopleObjects.children().remove()},setTeam:function(a){var b=this;this.selectedTeam=a;AD.comm.service.get({url:"/fcf_activities/teammembers",params:{teamID:a.getID()}}).fail(function(){console.error("problem looking up teammembers: teamID:"+
a.getID())}).then(function(a){var d=[],a=a.data||a;a.forEach(function(a){d.push({id:a.IDPerson,text:a.display_name})});b.listTeammates=new can.List(a);b.dom.inputTags.select3({items:d,multiple:!0,placeholder:"people in photo"});b.dom.peopleObjects.append(can.view("FCFActivities_ActivityReport_PersonList",{people:b.listTeammates}))})},loadData:function(a){var b=this;this.selectedActivity=a;var c=!1;AD.util.async.series([function(d){b.selectedTeam&&a.team==b.selectedTeam.getID()&&(c=!0);d()},function(d){c?
d():AD.Model.get("opstools.FCFActivities.UserTeam").findAll().fail(function(a){d(a)}).then(function(c){c.each(function(c){c.getID()==a.team&&(b.selectedTeam=c)});b.selectedTeam.getID==a.team?d():d(Error("can't find proper team!"))})},function(a){var c=b.selectedTeam.getID();AD.comm.service.get({url:"/fcfactivities/activityreport/activities",params:{team:c}}).fail(function(b){a(b)}).then(function(c){c=new can.List(c);b.listActivities=c;a()})},function(){b.dom.titleTeam.text(b.selectedTeam.attr("MinistryDisplayName"));
b.dom.listActivities.find("a.fcf-activity-list-item").remove();b.dom.listActivities.append(can.view("FCFActivities_ActivityReport_ActivityList",{activities:b.listActivities}));b.selectActivity(a);b.updateImageList()}],function(){})},selectActivity:function(a){this.selectActivityRow(this.dom.listActivities.find('[activity-id="'+a.getID()+'"]'))},selectActivityRow:function(a){this.dom.listActivities.find(".active").removeClass("active");a&&a.addClass("active")},selectImageRow:function(a){this.dom.listImages.find(".active").removeClass("active");
a&&a.addClass("active")},personSelected:function(a){a.added?this.dom.peopleObjects.find('[data-person-id="'+a.added.id+'"]').hide():a.removed&&this.dom.peopleObjects.find('[data-person-id="'+a.removed.id+'"]').show()},updateImageList:function(){var a=this,b=this.selectedActivity.getID?this.selectedActivity.getID():this.selectedActivity.id;AD.Model.get("opstools.FCFActivities.ActivityImage").findAll({activity:b}).fail(function(a){console.error(a)}).then(function(b){b=b.data||b;console.log("ImageList:");
console.log(b);a.clearImageList();a.dom.listImages.append(can.view("FCFActivities_ActivityReport_ImageList",{images:b,teammates:a.listTeammates}));a.selectImageRow(a.dom.listImages.find(".addImage"));a.clearForm()});this.dom.titleActivity.text(this.selectedActivity.activity_name);this.dom.titleActivityProject.text(this.selectedActivity.ProjectOwner);this.dom.titleActivityTeam.text(this.selectedActivity.team_name)},".fcf-activity-report-activities a  click":function(a,b){this.selectActivityRow(a);
this.selectedActivity=a.data("activity");this.updateImageList();b.preventDefault()},"a.fcf-activity-image-list-item.addImage click":function(a){this.selectImageRow(a);this.clearForm()},"a.fcf-activity-image-list-item:not(.addImage) click":function(a){this.selectImageRow(a);this.loadForm(a.data("image"))},".fcf-activity-people-objects click":function(a,b){a.hide();var c=a.data("person"),d=this.dom.inputTags.select3("data"),k={};d.forEach(function(a){k[a.id]=a.text});k[c.attr("IDPerson")]||d.push({id:c.attr("IDPerson"),
text:c.attr("display_name")});this.dom.inputTags.select3("data",d);b.preventDefault()},"#fcf-activity-image-form-save click":function(a,b){this.formSubmit();b.preventDefault()}})});steal.executed("opstools/FCFActivities/controllers/ActivityReport.js");
steal("can/view/ejs",function(a){return a.view.preload("opstools_FCFActivities_views_FCFActivities_FCFActivities_ejs",a.EJS(function(b,c){with(c)with(b){var d=[];d.push('<div class="opsportal-stage-container opsportal-padding-bottom-2x" >\n<\!-- \n#  Appdev Label Info:\n#label_context:opstool-FCFActivities\n#language_code:en\n--\>\n<div id="fcf-activity-portal" class="container">\n\t<div class="row clearfix">\n\t\t<div class="col-md-12 column">\n\t\t\t<nav class="navbar navbar-default" role="navigation">\n\t\t\t\t<div class="navbar-header">\n\t\t\t\t\t <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button> <a class="navbar-brand" href="#">Activities: </a>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\n\t\t\t\t\t<ul class="nav navbar-nav navbar-right">\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href="#fcf-activities/AddActivity1" class="fcf-activity-new">New Activity</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</nav>\n\t\t\t<div class="jumbotron well">\n\t\t\t\t<h1>\n\t\t\t\t\tActivities\n\t\t\t\t</h1>\n\t\t\t</div>\n\t\t\t<div class="row clearfix">\n\t\t\t\t<div class="col-md-6 column">\n\t\t\t\t\t<h3>\n\t\t\t\t\t\tLatest Activity Reports\n\t\t\t\t\t</h3>\n\t\t\t\t\t<ol class="list-unstyled" style="border: 1px solid #ccc; padding: 2.5px;" >\n\t\t\t\t\t\t<li class="clearfix">\n\t\t\t\t\t\t\t<img alt="48x48" src="http://lorempixel.com/48/48/" class="img-rounded pull-left fcf-list-image" />\n\t\t\t\t\t\t\t<H4 class="fcf-list-rowH4">Image Caption<br><small><span class="fcf-tag">person 1</span><span class="fcf-tag">person 2</span><span class="fcf-tag fcf-tag-selected">person 3</span></small></H4>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="clearfix">\n\t\t\t\t\t\t\t<img alt="48x48" src="http://lorempixel.com/48/48/" class="img-rounded pull-left fcf-list-image" />\n\t\t\t\t\t\t\t<H4 class="fcf-list-rowH4">Image Caption<br><small><span class="fcf-tag">person 1</span><span class="fcf-tag fcf-tag-selected">person 3</span><span class="fcf-tag">person 2</span></small></H4>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="clearfix">\n\t\t\t\t\t\t\t<img alt="48x48" src="http://lorempixel.com/48/48/" class="img-rounded pull-left fcf-list-image" />\n\t\t\t\t\t\t\t<H4 class="fcf-list-rowH4">Image Caption<br><small><span class="fcf-tag">person 1</span><span class="fcf-tag fcf-tag-selected">person 3</span><span class="fcf-tag fcf-tag">person 2</span></small></H4>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\n\t\t\t\t\t</ol>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-md-6 column">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n<div id="fcf-activity-add-chooseTeam"  class="container">\n\t<div class="row clearfix">\n\t\t<div class="col-md-12 column">\n\t\t\t<span class="pull-right" app-label-key="fcf.assignment.Choose.Team.step1">Step 1 of 333</span>\n\t\t\t<h3 class="text-left">\n\t\t\t\t<span app-label-key="fcf.assignment.Choose.Team" >Choose Your Team</span>\n\t\t\t</h3>\n\t\t\t<div class="row clearfix">\n\t\t\t\t<div class="col-md-10 column">\n\t\t\t\t\t\n\t\t\t\t\t<h4>\n\t\t\t\t\t\t<span app-label-key="fcf.assignment.Choose.Team.Instructions">Instructions</span>\n\t\t\t\t\t</h4>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<span app-label-key="fcf.assignment.Choose.Team.Desc" >What Ministry Team is this activity associated with?</span>\n\t\t\t\t\t</p>\n\t\t\t\t\t<div class="fcf-team-list-search form-group">\n\t\t\t\t\t\t<input type="search" class="form-control fcf-team-filter typeahead" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<table class="fcf-team-list table">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th app-label-key="fcf.assignment.Team">\n\t\t\t\t\t\t\t\t\tT3am\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th app-label-key="fcf.assignment.Project">\n\t\t\t\t\t\t\t\t\tOwner\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr class="template"  addata="" >\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t[[= team.attr("MinistryDisplayName")]]\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t[[= team.attr("ProjectOwner")]]\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr class="active">\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\tTeam 2\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\tOwner 2\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\tTeam 3\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\tOwner 3\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-md-2 column">\n\t\t\t\t</div>\n\t\t\t</div> \n\t\t\t<div class="row clearfix">\n\t\t\t\t<div class="col-md-10 column">\n\t\t\t\t\t<button id="fcf-activity-add-chooseteam-next" type="button" class="btn btn-primary btn-sm pull-right"><span app-label-key="fcf.assignment.Next" >Nexttt</span></button>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-md-2 column">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n<div id="fcf-activity-add-chooseActivity"  class="container">\n\t<div class="row clearfix">\n\t\t<div class="col-md-12 column">\n\t\t\t<span class="pull-right" appp-label-key="fcf.assignment.add.step2">Step 2 of 333</span>\n\t\t\t<h3 class="text-left">\n\t\t\t\t<span appp-label-key="fcf.assignment.Title.ChooseActivity" >Choose An Activity</span>\n\t\t\t</h3>\n\t\t\t<div class="row clearfix">\n\t\t\t\t<div class="col-md-10 column">\n\t\t\t\t\t\n\t\t\t\t\t<h4>\n\t\t\t\t\t\t<span appp-label-key="fcf.assignment.Choose.Instructions">Instructions</span>\n\t\t\t\t\t</h4>\n\t\t\t\t\t<p> \n\t\t\t\t\t\t<span appp-label-key="fcf.assignment.Choose.Activity.Team" >Team:</span> <span class="fcf-activity-add-chooseActivity-teamName" >[[= team.attr("MinistryDisplayName")]]</span>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<span appp-label-key="fcf.assignment.Choose.Activity.Desc1" >Choose one of the following \n\t\t\t\t\t\tactivities associated with this team.</span>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<span appp-label-key="fcf.assignment.Choose.Activity.Desc2" >If you do not see an activity in the list then click the add activity button.</span>\n\t\t\t\t\t</p>\n\t\t\t\t\t<div class="fcf-activity-list-search form-group">\n\t\t\t\t\t\t<input type="search" class="form-control fcf-activity-filter typeahead" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<table class="fcf-activity-list table">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th appp-label-key="fcf.assignment.Activity">\n\t\t\t\t\t\t\t\t\tActivity\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th appp-label-key="fcf.assignment.SubmittedBy">\n\t\t\t\t\t\t\t\t\tSubmitted By\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th appp-label-key="fcf.assignment.ApprovedBy">\n\t\t\t\t\t\t\t\t\tApprovedBy\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr class="template"  addata="" >\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t[[= activity.attr("activityName")]]\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t[[= activity.attr("createdBy")]]\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t[[= activity.attr("approvedBy")]]\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr class="active">\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\tTeam 2\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\tOwner 2\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\tTeam 3\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\tOwner 3\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-md-2 column">\n\t\t\t\t</div>\n\t\t\t</div> \n\t\t\t<div class="row clearfix">\n\t\t\t\t<div class="col-md-10 column">\n\t\t\t\t\t<button id="fcf-activity-add-chooseAssignment-addAssignment" type="button" class="btn btn-success btn-sm pull-left" href="#fcf-modal-new-Activity" role="button" data-toggle="modal" ><span appp-label-key="fcf.assignment.Add" >Add Assignment</span></button>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-md-2 column">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="row clearfix">\n\t\t\t\t<div class="col-md-10 column">\n\t\t\t\t\t<button id="fcf-activity-add-chooseAssignment-next" type="button" class="btn btn-primary btn-sm pull-right"><span appp-label-key="fcf.assignment.Next" >Nexttt</span></button>\n\t\t\t\t\t<button id="fcf-activity-add-chooseAssignment-previous" type="button" class="btn btn-primary btn-sm pull-right"><span appp-label-key="fcf.assignment.Prev" >Previoussss</span></button>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-md-2 column">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="modal fade" id="fcf-modal-new-Activity" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n\t\t\t\t<div class="modal-dialog">\n\t\t\t\t\t<div class="modal-content">\n\t\t\t\t\t\t<div class="modal-header">\n\t\t\t\t\t\t\t <button type="button" class="close" data-dismiss="modal" aria-hidden="true">\u00d7</button>\n\t\t\t\t\t\t\t<h4 class="modal-title" id="myModalLabel">\n\t\t\t\t\t\t\t\t<span appp-label-key="fcf.assignment.addAssignment.Title" >Add a New Activity</span>\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="modal-body">\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div role="form">\n\t\t\t\t\t\t\t\t<input type="hidden" id="activity-team" name=\'team\' />\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<h4>\n\t\t\t\t\t\t\t\t\t\t<span appp-label-key="fcf.assignment.Choose.ActivityName">Activity Name</span>\n\t\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t <label for="activityName" appp-label-key="fcf.assignment.addAssignment.Choose.ActivityNameDesc" >Please use a name everyone associated with the activity will recognize.</label>\n\t\t\t\t\t\t\t\t\t <input type="text" class="form-control" placeholder="Activity Name" id="activityName" appp-label-key="fcf.assignment.Choose.ActivityName" name="name" required >\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="form-inline">\n\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t <label for="dateStart" appp-label-key="fcf.assignment.addAssignment.Choose.startDate">Start Date</label>\n\t\t\t\t\t\t\t\t\t <input type="date" class="form-control" id="dateStart" name="startDate" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t <label for="dateEnd" appp-label-key="fcf.assignment.addAssignment.Choose.endDate">End Date</label>\n\t\t\t\t\t\t\t\t\t <input type="date" class="form-control" id="dateEnd" name="endDate"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div role="form" class="objectives-section">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<h4>\n\t\t\t\t\t\t\t\t\t\t<span appp-label-key="fcf.assignment.Choose.TeamObjectives">Team Objectives</span>\n\t\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t\t<span appp-label-key="fcf.assignment.Choose.TeamObjectivesDesc" > Every activity must meet at least one objective. Please choose all that apply:</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="checkbox template-objectives">\n\t\t\t\t\t\t\t\t\t <label><input type="checkbox" value="[[= objective.id ]]" name="objective" /> [[= objective.description ]]</label>\n\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t\t<div class="checkbox">\n\t\t\t\t\t\t\t\t\t <label><input type="checkbox" /> Objective 2 </label>\n\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t\t<div class="checkbox">\n\t\t\t\t\t\t\t\t\t <label><input type="checkbox" /> Objective 3 </label>\n\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="description-section">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<h4>\n\t\t\t\t\t\t\t\t\t\t<span appp-label-key="fcf.assignment.Choose.Description">Description</span>\n\t\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t <label for="activityName" appp-label-key="fcf.assignment.Choose.DescriptionDesc" >Please describe the activity using the team objectives as a guideline.</label>\n\t\t\t\t\t\t\t\t\t <textarea type="textarea" class="form-control" placeholder="Description" id="activityDescription" appp-label-key="fcf.assignment.Choose.Description" name="description"',a.view.pending(),
">");d.push('\n\t\t\t\t\t\t\t\t\t </textarea>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="modal-footer">\n\t\t\t\t\t\t\t <button type="button" class="btn btn-default" data-dismiss="modal" ><span appp-label-key="fcf.assignment.Cancel">Cancel</span></button>\n\t\t\t\t\t\t\t <button id="add-assignment" type="button" class="btn btn-primary"><span appp-label-key="fcf.assignment.Add">Add</span></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n<div id=\'fcf-activity-add-report\' class="container">\n\t<div class="row clearfix">\n\t\t<div class="col-md-12 column">\n\t\t\t<span class="pull-right" appp-label-key="fcf.activity.add.report.step">Step 3 of 3</span>\n\t\t\t<h3 class="text-left">\n\t\t\t\t<span appp-label-key="fcf.activity.add.report.CurrentActivity" >Current Activity Report</span>\n\t\t\t</h3>\n\t\t</div>\n\t</div>\n\t<div class="row clearfix">\n\t\t<div class="col-md-4 column fcf-activity-report">\n\t\t\t<h2>\n\t\t\t\t<span appp-label-key="fcf.activity.report.AllActivities" >All Activities for </span><span class=\'fcf-activity-team-name\'>[TEAM]</span>\n\t\t\t</h2>\n\t\t\t<div class="list-group fcf-activity-report-activities">\n\t\t\t\t<a class="list-group-item fcf-activity-list-item  template"  activity-id="[[= activity.attr(\'id\') ]]" >\n\t\t\t\t\t<img alt="140x140" src="" class="img-rounded pull-left fcf-activity-list-image" />\n\t\t\t\t\t<h4 class="list-group-item-heading">\n\t\t\t\t\t\t[[= activity.attr("activity_name") ]]\n\t\t\t\t\t</h4>\n\t\t\t\t\t<p class="list-group-item-text fcf-activity-list-item-team">\n\t\t\t\t\t\tTeam Name\n\t\t\t\t\t</p>\n\t\t\t\t\t<p class="fcf-activity-list-item-people"> person 1, person 2, person 3 </p>\n\t\t\t\t</a>\n\t\t\t\t<a class="list-group-item fcf-activity-list-item">\n\t\t\t\t\t<img alt="140x140" src="http://lorempixel.com/140/140/" class="img-rounded pull-left fcf-activity-list-image" />\n\t\t\t\t\t<h4 class="list-group-item-heading">\n\t\t\t\t\t\tActivity Name\n\t\t\t\t\t</h4>\n\t\t\t\t\t<p class="list-group-item-text">\n\t\t\t\t\t\tTeam Name\n\t\t\t\t\t</p>\n\t\t\t\t\t<p> person 1, person 2, person 3 </p>\n\t\t\t\t</a>\n\t\t\t\t<a class="list-group-item fcf-activity-list-item">\n\t\t\t\t\t<img alt="140x140" src="http://lorempixel.com/140/140/" class="img-rounded pull-left fcf-activity-list-image" />\n\t\t\t\t\t<h4 class="list-group-item-heading">\n\t\t\t\t\t\tActivity Name\n\t\t\t\t\t</h4>\n\t\t\t\t\t<p class="list-group-item-text">\n\t\t\t\t\t\tTeam Name\n\t\t\t\t\t</p>\n\t\t\t\t\t<p> person 1, person 2, person 3 </p>\n\t\t\t\t</a>\n\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-md-4 column">\n\t\t\t<h2>\n\t\t\t\t<span class=\'fcf-activity-activity-name\'>[Activity Name]</span>\n\t\t\t</h2>\n\t\t\t<h4>\n\t\t\t\t<span class=\'fcf-activity-activity-project-name\'>[Project Name]</span>\n\t\t\t</h4>\n\t\t\t<h5>\n\t\t\t\t<span class=\'fcf-activity-activity-team-name\'>[Team Name]</span>\n\t\t\t</h5>\n\t\t\t<div class="list-group fcf-activity-report-activity-images">\n\t\t\t\t<a class="list-group-item fcf-activity-image-list-item addImage"   >\n\t\t\t\t\t<img alt="140x140" src="/data/fcf/images/activities/placeholder_activity.jpg" class="img-rounded pull-left fcf-activity-list-image" />\n\t\t\t\t\t<h4 class="list-group-item-heading">\n\t\t\t\t\t\t<span appp-label-key="fcf.activity.add.report.AddNewImage"> Add New Image </span>\n\t\t\t\t\t</h4>\n\t\t\t\t</a>\n\t\t\t\t<a class="list-group-item fcf-activity-image-list-item  template"  image-id="[[= image.attr(\'id\') ]]" >\n\t\t\t\t\t<img alt="140x140" src="" class="img-rounded pull-left fcf-activity-list-image" />\n\t\t\t\t\t<h5>\n\t\t\t\t\t\t[[= image.attr(\'date\').split(\'T\')[0] ]]\n\t\t\t\t\t</h5>\n\t\t\t\t\t<h4 class="list-group-item-heading">\n\t\t\t\t\t\t[[= image.attr("caption") ]]\n\t\t\t\t\t</h4>\n\t\t\t\t\t<p class="fcf-activity-list-item-people"> \n\t\t\t\t\t<\!-- \nconsole.log(\'image:\', image);\n\t\t\t\t\t\tvar listPeopleIDs = image.attr(\'taggedPeople\');\nconsole.log(\'listPeopleIDs:\', listPeopleIDs);\nconsole.log(\'teammates:\', teammates);\n\t\t\t\t\t\tlistPeopleIDs.forEach(function(personID){\n\t\t\t\t\t\t\tvar foundPerson = null;\n\t\t\t\t\t\t\tteammates.each(function(mate){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (mate.IDPerson == personID) {\n\t\t\t\t\t\t\t\t\tfoundPerson = mate;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tif (foundPerson) {   \n\t\t\t\t\t\t\t\t\nconsole.log(foundPerson.display_name);\n\t\t\t\t\t\t\t\t]]<a> [[= foundPerson.display_name ]] </a><\!--\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t})\n\t\t\t\t\t--\></p>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-md-4 column  fcf-activity-image-form">\n\t\t\t\t\n\t\t\t<div id="fcf-activity-image-upload" class="dropzone dz-clickable" style="margin-bottom: 10px;" >\n\t\t\t\t<div class="dz-message fcf-activity-icon-picture">\n\t\t\t\t\t<span class="first" appp-label-key="fcf.activity.add.report.DragImageHere">Drag image here</span>\n\t\t\t\t\t<span appp-label-key="fcf.activity.add.report.or">- or -</span>\n\t\t\t\t\t<span class="opsportal-margin-top"><a class="btn opsportal-btn opsportal-btn-dk" title="Click to open the file browser" href="#" appp-label-key="fcf.activity.add.report.ClickToOpenFileBrowser">Click to open the file browser</a></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="preview-template" style="display: none;"></div>\n\t\t\t\t<img src="" id="fcf-activity-image-uploaded" />\n\t\t\t</div>\n\t\t\t\t\n\t\t\t<form class="form-horizontal fcf-activity-image-form" role="form">\n\t\t\t\t<input type="hidden" class="form-control" id="image-image" name="image" />\n\t\t\t\t<input type="hidden" class="form-control" id="image-activity" name="activity" />\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<div class="col-sm-8">\n\t\t\t\t\t\t<input type="text" class="form-control" id="image-caption"  placeholder=\'caption\' name="caption" appp-label-key="fcf.activity.image.form.caption" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-sm-4">\n\t\t\t\t\t\t<input type="date" class="form-control" id="image-date" name="date" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<div class="col-sm-12">\n\t\t\t\t\t\t<div type="text" class="" id="image-tags" name="tags" placeholder=\'people in photo\' appp-label-key="fcf.activity.image.form.tags"> </div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<div class="col-sm-12 panel panel-default">\n\t\t\t\t\t\n\t\t\t\t\t\t<div class="panel-body fcf-activitiy-people-objects">\n\t\t\t\t\t\t  \t<\!-- people.each(function(person){   --\>\n\t\t\t\t\t\t    <div class="fcf-activity-people-objects" obj-embed="person"  data-person-id="[[= person.attr(\'IDPerson\') ]]"><img src="[[= person.attr(\'avatar\') ]]" class="img-rounded pull-left fcf-activity-list-image" style="width: 20%; height: 20%" />\n\t\t\t\t\t\t\t\t<h4 class="list-group-item-heading">\n\t\t\t\t\t\t\t\t\t[[= person.attr("display_name") ]]\n\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<\!-- }) --\>\n\t\t\t\t\t\t    <div data-item-id="230" class="mockup fcf-activity-people-objects"><img alt="140x140" src="/images/activities_person_avatar.jpeg" class="img-rounded pull-left fcf-activity-list-image" style="width: 50%; height: 50%" />\n\t\t\t\t\t\t\t\t<h4 class="list-group-item-heading">\n\t\t\t\t\t\t\t\t\t[[= activity.attr("activity_name") ]]\n\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div data-item-id="230" class="mockup fcf-activity-people-objects"><img alt="140x140" src="/images/activities_person_avatar.jpeg" class="img-rounded pull-left fcf-activity-list-image" style="width: 50%; height: 50%" />\n\t\t\t\t\t\t\t\t<h4 class="list-group-item-heading">\n\t\t\t\t\t\t\t\t\t[[= activity.attr("activity_name") ]]\n\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div data-item-id="230" class="mockup fcf-activity-people-objects"><img alt="140x140" src="/images/activities_person_avatar.jpeg" class="img-rounded pull-left fcf-activity-list-image" style="width: 50%; height: 50%" />\n\t\t\t\t\t\t\t\t<h4 class="list-group-item-heading">\n\t\t\t\t\t\t\t\t\t[[= activity.attr("activity_name") ]]\n\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div class="row clearfix">\n\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t<button id="fcf-activity-image-form-save" type="button" class="btn btn-primary btn-sm pull-right"><span appp-label-key="fcf.assignment.imageform.SaveImage" >Save Image</span></button>\n\t\t\t\t\t\t<button id="fcf-activity-image-form-cancel" type="button" class="btn btn-default btn-sm pull-right"><span appp-label-key="fcf.assignment.imageform.Cancel" >Cancel</span></button>\n\t\t\t\t\t\t<button id="fcf-activity-image-form-delete" type="button" class="btn btn-default btn-sm pull-right"><span appp-label-key="fcf.assignment.imageform.Delete" >Delete</span></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t</div>\n\t<div class="row clearfix">\n\t\t<div class="col-md-12 column">\n\t\t\t<button id="fcf-activity-add-report-confirm" type="button" class="btn btn-primary btn-sm pull-right"><span app-label-key="fcf.assignment.Next" >Next</span></button>\n\t\t\t<button id="fcf-activity-add-report-previous" type="button" class="btn btn-default btn-sm pull-right"><span app-label-key="fcf.assignment.Previous" >Previous</span></button>\n\t\t</div>\n\t</div>\n</div>\n</div>');
return d.join("")}}))});steal.executed("opstools/FCFActivities/views/FCFActivities/FCFActivities.ejs");
steal("appdev","//OpsPortal/classes/OpsTool.js","opstools/FCFActivities/controllers/Portal.js","opstools/FCFActivities/controllers/AddChooseMinistry.js","opstools/FCFActivities/controllers/AddChooseActivity.js","opstools/FCFActivities/controllers/ActivityReport.js","//opstools/FCFActivities/views/FCFActivities/FCFActivities.ejs",function(){AD.Control.OpsTool.extend("FCFActivities",{init:function(a,b){var c=this;this.options=b=AD.defaults({templateDOM:"//opstools/FCFActivities/views/FCFActivities/FCFActivities.ejs",
resize_notification:"FCFActivities.resize",tool:null},b);this._super(a,b);this.dataSource=this.options.dataSource;this.initDOM();this.initPortals();this.initEvents();AD.comm.hub.subscribe("fcf.activity.new",function(){c.newActivity()})},initDOM:function(){this.element.html(can.view(this.options.templateDOM,{}))},initEvents:function(){var a=this;this.portals.Add1.element.on(this.portals.Add1.CONST.NEXT,function(){var b=a.portals.Add1.value();console.log(" ... Team Selected: "+b.getID());a.portals.Add2.loadData(b);
a.showPortal("Add2");a.portals.Report.setTeam(b)});this.portals.Add2.element.on(this.portals.Add2.CONST.NEXT,function(){var b=a.portals.Add2.value();console.log(" ... Activity Selected: "+b.getID());a.portals.Report.loadData(b);a.showPortal("Report")});this.portals.Add2.element.on(this.portals.Add2.CONST.PREV,function(){a.showPortal("Add1")})},initPortals:function(){this.portals={};this.portals.Portal=new (AD.Control.get("opstools.FCFActivities.Portal"))(this.element.find("#fcf-activity-portal"));
this.portals.Add1=new (AD.Control.get("opstools.FCFActivities.AddChooseMinistry"))(this.element.find("#fcf-activity-add-chooseTeam"));this.portals.Add2=new (AD.Control.get("opstools.FCFActivities.AddChooseActivity"))(this.element.find("#fcf-activity-add-chooseActivity"));this.portals.Report=new (AD.Control.get("opstools.FCFActivities.ActivityReport"))(this.element.find("#fcf-activity-add-report"))},newActivity:function(){this.showPortal("Add1")},showPortal:function(a){for(var b in this.portals)b==
a?this.portals[b].show():this.portals[b].hide()},".ad-item-add click":function(a,b){b.preventDefault()}})});steal.executed("opstools/FCFActivities/controllers/FCFActivities.js");steal.executed("/site/labels/opstool-FCFActivities.js");steal("can/control/route","styles/dropzone.css").then("//opstools/FCFActivities/controllers/FCFActivities.js","//opstools/FCFActivities/FCFActivities.css","/site/labels/opstool-FCFActivities.js").then(function(){});steal.executed("opstools/FCFActivities/FCFActivities.js");
steal.popPending();
